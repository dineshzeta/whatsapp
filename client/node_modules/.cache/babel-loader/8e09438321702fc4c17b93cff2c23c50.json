{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\Whatshub_v1.2\\\\client\\\\src\\\\admin\\\\pages\\\\profile\\\\ProfileSet.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Box, Stack, Typography, Divider, TextField, LinearProgress } from '@mui/material';\nimport { LoadingButton } from '@mui/lab';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfileSet = () => {\n  _s();\n  const [state, setState] = React.useState({});\n  const token = localStorage.getItem(process.env.REACT_APP_TOKEN + \"_admin\");\n  const history = useHistory();\n  function getEmail() {\n    axios.get(`${process.env.REACT_APP_BASE_URL}/api/user/get_admin_email`, {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    }).then(res => {\n      setState({\n        ...state,\n        email: res.data.email\n      });\n    }).catch(err => console.log(err));\n  }\n  React.useEffect(() => {\n    if (!token) {\n      return;\n    }\n    getEmail();\n  }, [token]);\n  function updateProfile() {\n    setState({\n      ...state,\n      loading: true\n    });\n    axios.post(`${process.env.REACT_APP_BASE_URL}/api/user/change_admin_pw`, state, {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    }).then(res => {\n      alert(res.data.msg);\n      if (res.data.success) {\n        localStorage.removeItem(process.env.REACT_APP_TOKEN + \"_admin\");\n        history.push('/admin');\n      }\n      setState({\n        ...state,\n        loading: false\n      });\n    }).catch(err => console.log(err));\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    p: 2,\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      children: /*#__PURE__*/_jsxDEV(Stack, {\n        justifyContent: 'space-between',\n        alignItems: \"center\",\n        direction: 'row',\n        spacing: 2,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          fontWeight: 'bold',\n          children: \"Admin Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: 2,\n      mb: 2,\n      children: /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), state.email ? /*#__PURE__*/_jsxDEV(Stack, {\n      direction: 'column',\n      spacing: 2,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        onChange: e => setState({\n          ...state,\n          email: e.target.value\n        }),\n        value: state.email,\n        label: \"Email\",\n        fullWidth: true,\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        onChange: e => setState({\n          ...state,\n          new_password: e.target.value\n        }),\n        label: \"Password\",\n        helperText: \"Leave it blank if you dont wanna change it\",\n        fullWidth: true,\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(LoadingButton, {\n        loading: state.loading,\n        onClick: updateProfile,\n        size: \"small\",\n        fullWidth: true,\n        variant: \"contained\",\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(LinearProgress, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n};\n_s(ProfileSet, \"r/MdE/r3IAcrGQWPCbOnQhdtAPs=\", false, function () {\n  return [useHistory];\n});\n_c = ProfileSet;\nexport default ProfileSet;\nvar _c;\n$RefreshReg$(_c, \"ProfileSet\");","map":{"version":3,"names":["React","Box","Stack","Typography","Divider","TextField","LinearProgress","LoadingButton","axios","useHistory","ProfileSet","state","setState","useState","token","localStorage","getItem","process","env","REACT_APP_TOKEN","history","getEmail","get","REACT_APP_BASE_URL","headers","Authorization","then","res","email","data","catch","err","console","log","useEffect","updateProfile","loading","post","alert","msg","success","removeItem","push","e","target","value","new_password"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/admin/pages/profile/ProfileSet.js"],"sourcesContent":["import React from 'react'\r\nimport { Box, Stack, Typography, Divider, TextField, LinearProgress } from '@mui/material'\r\nimport { LoadingButton } from '@mui/lab'\r\nimport axios from 'axios'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst ProfileSet = () => {\r\n    const [state, setState] = React.useState({})\r\n    const token = localStorage.getItem(process.env.REACT_APP_TOKEN + \"_admin\")\r\n    const history = useHistory()\r\n\r\n    function getEmail() {\r\n        axios.get(`${process.env.REACT_APP_BASE_URL}/api/user/get_admin_email`, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        }).then((res) => {\r\n            setState({ ...state, email: res.data.email })\r\n        })\r\n            .catch((err) => console.log(err))\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (!token) {\r\n            return\r\n        }\r\n        getEmail()\r\n    }, [token])\r\n\r\n    function updateProfile() {\r\n        setState({ ...state, loading: true })\r\n        axios.post(`${process.env.REACT_APP_BASE_URL}/api/user/change_admin_pw`, state, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        }).then((res) => {\r\n            alert(res.data.msg)\r\n            if (res.data.success) {\r\n                localStorage.removeItem(process.env.REACT_APP_TOKEN + \"_admin\")\r\n                history.push('/admin')\r\n            }\r\n            setState({ ...state, loading: false })\r\n        }).catch((err) => console.log(err))\r\n    }\r\n\r\n    return (\r\n        <Box p={2} >\r\n            <Box>\r\n                <Stack justifyContent={'space-between'} alignItems='center' direction={'row'} spacing={2}>\r\n                    <Typography fontWeight={'bold'} >Admin Profile</Typography>\r\n                </Stack>\r\n            </Box>\r\n            <Box mt={2} mb={2}>\r\n                <Divider />\r\n            </Box>\r\n\r\n            {\r\n                state.email ? (\r\n                    <Stack direction={'column'} spacing={2}>\r\n                        <TextField onChange={(e) => setState({ ...state, email: e.target.value })} value={state.email} label=\"Email\" fullWidth size='small' />\r\n                        <TextField onChange={(e) => setState({ ...state, new_password: e.target.value })} label=\"Password\" helperText=\"Leave it blank if you dont wanna change it\" fullWidth size='small' />\r\n                        <LoadingButton loading={state.loading} onClick={updateProfile} size='small' fullWidth variant='contained' >Update</LoadingButton>\r\n                    </Stack>\r\n                ) : <LinearProgress />\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default ProfileSet"],"mappings":"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"},"metadata":{},"sourceType":"module"}