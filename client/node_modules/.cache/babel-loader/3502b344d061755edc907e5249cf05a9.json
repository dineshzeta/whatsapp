{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Box,Button,Dialog,Divider,IconButton,LinearProgress,Typography}from'@mui/material';import{Stack}from'@mui/system';import DialogHeader from'../../../common/DialogHeader';import{Close,Delete}from'@mui/icons-material';import AddPlan from'./AddPlan';import{GlobalContext}from'../../../context/GlobalContext';import GetPlans from'../../../utils/GetPlans';import axios from'axios';import GetTokenAdmin from'../../../utils/GetTokenAdmin';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ManagePlans=function ManagePlans(){var _React$useState=React.useState({dialog:false}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var globalContext=React.useContext(GlobalContext);var _GetPlans=GetPlans(),plan_data=_GetPlans.plan_data;var _GetTokenAdmin=GetTokenAdmin(),token_admin=_GetTokenAdmin.token_admin;function deletePlan(_x){return _deletePlan.apply(this,arguments);}function _deletePlan(){_deletePlan=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!window.confirm(\"Are you sure?\")){_context.next=10;break;}setState(_objectSpread(_objectSpread({},state),{},{loading:true}));_context.next=4;return axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/plan/delete\"),{id:e.id},{headers:{Authorization:\"Bearer \"+token_admin}});case 4:res=_context.sent;alert(res.data.msg);if(res.data.success){_context.next=9;break;}console.log(res.data);return _context.abrupt(\"return\");case 9:removeArr(e);case 10:case\"end\":return _context.stop();}}},_callee);}));return _deletePlan.apply(this,arguments);}function removeArr(e){var update=globalContext.data.plan_data.filter(function(i){return i!==e;});globalContext.setData(_objectSpread(_objectSpread({},globalContext.data),{},{plan_data:update}));}return/*#__PURE__*/_jsxs(Box,{p:2,children:[/*#__PURE__*/_jsxs(Stack,{alignItems:'center',direction:'row',justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Typography,{fontWeight:'bold',children:\"Manage Plans\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setState(_objectSpread(_objectSpread({},state),{},{dialog:true}));},size:\"small\",children:\"add new\"})]}),/*#__PURE__*/_jsx(Box,{mt:2,mb:2,children:/*#__PURE__*/_jsx(Divider,{})}),/*#__PURE__*/_jsxs(Dialog,{open:state.dialog,onClose:function onClose(){return setState(_objectSpread(_objectSpread({},state),{},{dialog:false}));},fullScreen:true,children:[/*#__PURE__*/_jsx(DialogHeader,{closebtn:/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setState(_objectSpread(_objectSpread({},state),{},{dialog:false}));},children:/*#__PURE__*/_jsx(Close,{})})}),/*#__PURE__*/_jsx(AddPlan,{})]}),/*#__PURE__*/_jsx(Stack,{direction:'column',spacing:2,children:globalContext.data.plan_data?globalContext.data.plan_data.map(function(i,key){return/*#__PURE__*/_jsx(Box,{borderRadius:2,bgcolor:\"#131313\",p:2,children:/*#__PURE__*/_jsxs(Stack,{direction:'row',justifyContent:\"space-between\",children:[/*#__PURE__*/_jsxs(Stack,{direction:'column',children:[/*#__PURE__*/_jsx(Typography,{children:i.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"gray\",children:[\"Message Limit: \",i.message_limit]}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"gray\",children:[\"Cost: \",i.cost]})]}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){deletePlan(i);},color:\"error\",children:/*#__PURE__*/_jsx(Delete,{})})]})});}):/*#__PURE__*/_jsx(LinearProgress,{})})]});};export default ManagePlans;","map":{"version":3,"names":["React","Box","Button","Dialog","Divider","IconButton","LinearProgress","Typography","Stack","DialogHeader","Close","Delete","AddPlan","GlobalContext","GetPlans","axios","GetTokenAdmin","ManagePlans","useState","dialog","state","setState","globalContext","useContext","plan_data","token_admin","deletePlan","e","window","confirm","loading","post","process","env","REACT_APP_BASE_URL","id","headers","Authorization","res","alert","data","msg","success","console","log","removeArr","update","filter","i","setData","map","key","name","message_limit","cost"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/admin/pages/manage-plans/ManagePlans.js"],"sourcesContent":["import React from 'react'\r\nimport { Box, Button, Dialog, Divider, IconButton, LinearProgress, Typography } from '@mui/material'\r\nimport { Stack } from '@mui/system'\r\nimport DialogHeader from '../../../common/DialogHeader'\r\nimport { Close, Delete } from '@mui/icons-material'\r\nimport AddPlan from './AddPlan'\r\nimport { GlobalContext } from '../../../context/GlobalContext'\r\nimport GetPlans from '../../../utils/GetPlans'\r\nimport axios from 'axios'\r\nimport GetTokenAdmin from '../../../utils/GetTokenAdmin'\r\n\r\nconst ManagePlans = () => {\r\n    const [state, setState] = React.useState({\r\n        dialog: false\r\n    })\r\n    const globalContext = React.useContext(GlobalContext)\r\n    const { plan_data } = GetPlans()\r\n    const { token_admin } = GetTokenAdmin()\r\n\r\n    async function deletePlan(e) {\r\n        if (window.confirm(\"Are you sure?\")) {\r\n            setState({ ...state, loading: true })\r\n            const res = await axios.post(`${process.env.REACT_APP_BASE_URL}/api/plan/delete`, {\r\n                id: e.id\r\n            }, {\r\n                headers: {\r\n                    Authorization: \"Bearer \" + token_admin\r\n                }\r\n            })\r\n            alert(res.data.msg)\r\n            if (!res.data.success) {\r\n                console.log(res.data)\r\n                return\r\n            }\r\n            removeArr(e)\r\n        }\r\n\r\n    }\r\n\r\n    function removeArr(e) {\r\n        const update = globalContext.data.plan_data.filter(i => i !== e)\r\n        globalContext.setData({ ...globalContext.data, plan_data: update })\r\n    }\r\n\r\n    return (\r\n        <Box p={2} >\r\n            <Stack alignItems={'center'} direction={'row'} justifyContent='space-between'>\r\n                <Typography fontWeight={'bold'} >Manage Plans</Typography>\r\n                <Button onClick={() => setState({ ...state, dialog: true })} size='small'>add new</Button>\r\n            </Stack>\r\n            <Box mt={2} mb={2}>\r\n                <Divider />\r\n            </Box>\r\n            <Dialog open={state.dialog} onClose={() => setState({ ...state, dialog: false })} fullScreen>\r\n                <DialogHeader\r\n                    closebtn={\r\n                        <IconButton onClick={() => setState({ ...state, dialog: false })} >\r\n                            <Close />\r\n                        </IconButton>}\r\n                />\r\n                <AddPlan />\r\n            </Dialog>\r\n\r\n            <Stack direction={'column'} spacing={2}>\r\n                {\r\n                    globalContext.data.plan_data ? globalContext.data.plan_data.map((i, key) => {\r\n                        return (\r\n                            <Box borderRadius={2} bgcolor='#131313' p={2}>\r\n                                <Stack direction={'row'} justifyContent='space-between'>\r\n                                    <Stack direction={'column'}>\r\n                                        <Typography>{i.name}</Typography>\r\n                                        <Typography variant='caption' color='gray'>Message Limit: {i.message_limit}</Typography>\r\n                                        <Typography variant='caption' color='gray'>Cost: {i.cost}</Typography>\r\n                                    </Stack>\r\n                                    <IconButton onClick={() => {\r\n                                        deletePlan(i)\r\n                                    }} color='error' >\r\n                                        <Delete />\r\n                                    </IconButton>\r\n                                </Stack>\r\n                            </Box>\r\n                        )\r\n                    }) : <LinearProgress />\r\n                }\r\n            </Stack>\r\n\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default ManagePlans"],"mappings":"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"},"metadata":{},"sourceType":"module"}