{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box,Container,Stack,TextField,Typography}from'@mui/material';import{LoadingButton}from'@mui/lab';import axios from'axios';import React from'react';import GetTokenAdmin from'../../../utils/GetTokenAdmin';import{GlobalContext}from'../../../context/GlobalContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddPlan=function AddPlan(){var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var _GetTokenAdmin=GetTokenAdmin(),token_admin=_GetTokenAdmin.token_admin;var globalContext=React.useContext(GlobalContext);function fetchPlans(){return _fetchPlans.apply(this,arguments);}function _fetchPlans(){_fetchPlans=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setState(_objectSpread(_objectSpread({},state),{},{loading:true}));_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/plan/get\"));case 3:res=_context.sent;globalContext.setData(_objectSpread(_objectSpread({},globalContext.data),{},{plan_data:res.data.data}));if(!res.data.success){console.log(res.data);}setState(_objectSpread(_objectSpread({},state),{},{loading:false,cost:\"\",message_limit:\"\",name:\"\"}));case 7:case\"end\":return _context.stop();}}},_callee);}));return _fetchPlans.apply(this,arguments);}function addPlan(){return _addPlan.apply(this,arguments);}function _addPlan(){_addPlan=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setState(_objectSpread(_objectSpread({},state),{},{loading:true}));_context2.next=3;return axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/plan/add\"),{name:state.name,message_limit:state.message_limit,cost:state.cost},{headers:{Authorization:\"Bearer \"+token_admin}});case 3:res=_context2.sent;if(!res.data.success){console.log(res.data);}setState(_objectSpread(_objectSpread({},state),{},{loading:false}));alert(res.data.msg);fetchPlans();case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _addPlan.apply(this,arguments);}return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",children:/*#__PURE__*/_jsxs(Box,{mt:2,children:[/*#__PURE__*/_jsx(Box,{mb:4,children:/*#__PURE__*/_jsx(Typography,{align:\"center\",fontWeight:'bold',children:\"Add a plan\"})}),/*#__PURE__*/_jsxs(Stack,{direction:'column',spacing:2,children:[/*#__PURE__*/_jsx(TextField,{value:state.name,onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{name:e.target.value}));},fullWidth:true,label:\"Plan Name\",size:\"small\"}),/*#__PURE__*/_jsx(TextField,{value:state.message_limit,type:\"number\",onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{message_limit:parseInt(e.target.value)}));},fullWidth:true,label:\"Message Limit\",size:\"small\"}),/*#__PURE__*/_jsx(TextField,{value:state.cost,type:\"number\",onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{cost:parseInt(e.target.value)}));},fullWidth:true,label:\"Cost\",size:\"small\"}),/*#__PURE__*/_jsx(LoadingButton,{onClick:addPlan,loading:state.loading,variant:\"contained\",children:\"Add new\"})]})]})});};export default AddPlan;","map":{"version":3,"names":["Box","Container","Stack","TextField","Typography","LoadingButton","axios","React","GetTokenAdmin","GlobalContext","AddPlan","useState","state","setState","token_admin","globalContext","useContext","fetchPlans","loading","get","process","env","REACT_APP_BASE_URL","res","setData","data","plan_data","success","console","log","cost","message_limit","name","addPlan","post","headers","Authorization","alert","msg","e","target","value","parseInt"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/admin/pages/manage-plans/AddPlan.js"],"sourcesContent":["import { Box, Container, Stack, TextField, Typography } from '@mui/material'\r\nimport { LoadingButton } from '@mui/lab'\r\nimport axios from 'axios'\r\nimport React from 'react'\r\nimport GetTokenAdmin from '../../../utils/GetTokenAdmin'\r\nimport { GlobalContext } from '../../../context/GlobalContext'\r\n\r\nconst AddPlan = () => {\r\n    const [state, setState] = React.useState({})\r\n    const { token_admin } = GetTokenAdmin()\r\n    const globalContext = React.useContext(GlobalContext)\r\n\r\n    async function fetchPlans() {\r\n        setState({ ...state, loading: true })\r\n        const res = await axios.get(`${process.env.REACT_APP_BASE_URL}/api/plan/get`)\r\n        globalContext.setData({ ...globalContext.data, plan_data: res.data.data })\r\n        if (!res.data.success) {\r\n            console.log(res.data)\r\n        }\r\n        setState({ ...state, loading: false, cost: \"\", message_limit: \"\", name: \"\" })\r\n    }\r\n\r\n    async function addPlan() {\r\n        setState({ ...state, loading: true })\r\n        const res = await axios.post(`${process.env.REACT_APP_BASE_URL}/api/plan/add`, {\r\n            name: state.name,\r\n            message_limit: state.message_limit,\r\n            cost: state.cost\r\n        }, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token_admin\r\n            }\r\n        })\r\n        if (!res.data.success) {\r\n            console.log(res.data)\r\n        }\r\n        setState({ ...state, loading: false })\r\n        alert(res.data.msg)\r\n        fetchPlans()\r\n    }\r\n\r\n    return (\r\n        <Container maxWidth='lg'>\r\n            <Box mt={2}>\r\n                <Box mb={4}>\r\n                    <Typography align='center' fontWeight={'bold'} >Add a plan</Typography>\r\n                </Box>\r\n                <Stack direction={'column'} spacing={2}>\r\n                    <TextField value={state.name} onChange={(e) => setState({ ...state, name: e.target.value })} fullWidth label=\"Plan Name\" size='small' />\r\n                    <TextField value={state.message_limit} type=\"number\" onChange={(e) => setState({ ...state, message_limit: parseInt(e.target.value) })} fullWidth label=\"Message Limit\" size='small' />\r\n                    <TextField value={state.cost} type=\"number\" onChange={(e) => setState({ ...state, cost: parseInt(e.target.value) })} fullWidth label=\"Cost\" size='small' />\r\n                    <LoadingButton onClick={addPlan} loading={state.loading} variant='contained' >Add new</LoadingButton>\r\n                </Stack>\r\n            </Box>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default AddPlan"],"mappings":"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"},"metadata":{},"sourceType":"module"}