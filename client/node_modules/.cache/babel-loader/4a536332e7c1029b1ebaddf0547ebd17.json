{"ast":null,"code":"import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import React from'react';import{useHistory}from'react-router-dom';var GetUserByToken=function GetUserByToken(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),user_by_token=_React$useState2[0],setState=_React$useState2[1];var token=localStorage.getItem(process.env.REACT_APP_TOKEN+\"_user\");var history=useHistory();React.useEffect(function(){if(!token){return;}axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/user/get_user_by_token\"),{headers:{Authorization:\"Beare \"+token}}).then(function(res){if(res.data.logout){localStorage.removeItem(process.env.REACT_APP_TOKEN+\"_user\");history.push(\"/user/login\");}if(!res.data.success){console.log(res.data);}setState(res.data.data);}).catch(function(err){return console.log(err);});},[token]);return{user_by_token:user_by_token};};export default GetUserByToken;","map":{"version":3,"names":["axios","React","useHistory","GetUserByToken","useState","user_by_token","setState","token","localStorage","getItem","process","env","REACT_APP_TOKEN","history","useEffect","get","REACT_APP_BASE_URL","headers","Authorization","then","res","data","logout","removeItem","push","success","console","log","catch","err"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/utils/GetUserByToken.js"],"sourcesContent":["import axios from 'axios'\r\nimport React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst GetUserByToken = () => {\r\n    const [user_by_token, setState] = React.useState(\"\")\r\n    const token = localStorage.getItem(process.env.REACT_APP_TOKEN + \"_user\")\r\n    const history = useHistory()\r\n    React.useEffect(() => {\r\n        if (!token) {\r\n            return\r\n        }\r\n        axios.get(`${process.env.REACT_APP_BASE_URL}/api/user/get_user_by_token`, {\r\n            headers: {\r\n                Authorization: \"Beare \" + token\r\n            }\r\n        }).then((res) => {\r\n            if (res.data.logout) {\r\n                localStorage.removeItem(process.env.REACT_APP_TOKEN + \"_user\")\r\n                history.push(\"/user/login\")\r\n            }\r\n            if (!res.data.success) {\r\n                console.log(res.data)\r\n            }\r\n            setState(res.data.data)\r\n        })\r\n            .catch((err) => console.log(err))\r\n    }, [token])\r\n    return { user_by_token }\r\n}\r\n\r\nexport default GetUserByToken"],"mappings":"yIAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,UAAU,KAAQ,kBAAkB,CAE7C,GAAMC,eAAc,CAAG,QAAjBA,eAAc,EAAS,CACzB,oBAAkCF,KAAK,CAACG,QAAQ,CAAC,EAAE,CAAC,oDAA7CC,aAAa,qBAAEC,QAAQ,qBAC9B,GAAMC,MAAK,CAAGC,YAAY,CAACC,OAAO,CAACC,OAAO,CAACC,GAAG,CAACC,eAAe,CAAG,OAAO,CAAC,CACzE,GAAMC,QAAO,CAAGX,UAAU,EAAE,CAC5BD,KAAK,CAACa,SAAS,CAAC,UAAM,CAClB,GAAI,CAACP,KAAK,CAAE,CACR,OACJ,CACAP,KAAK,CAACe,GAAG,WAAIL,OAAO,CAACC,GAAG,CAACK,kBAAkB,gCAA+B,CACtEC,OAAO,CAAE,CACLC,aAAa,CAAE,QAAQ,CAAGX,KAC9B,CACJ,CAAC,CAAC,CAACY,IAAI,CAAC,SAACC,GAAG,CAAK,CACb,GAAIA,GAAG,CAACC,IAAI,CAACC,MAAM,CAAE,CACjBd,YAAY,CAACe,UAAU,CAACb,OAAO,CAACC,GAAG,CAACC,eAAe,CAAG,OAAO,CAAC,CAC9DC,OAAO,CAACW,IAAI,CAAC,aAAa,CAAC,CAC/B,CACA,GAAI,CAACJ,GAAG,CAACC,IAAI,CAACI,OAAO,CAAE,CACnBC,OAAO,CAACC,GAAG,CAACP,GAAG,CAACC,IAAI,CAAC,CACzB,CACAf,QAAQ,CAACc,GAAG,CAACC,IAAI,CAACA,IAAI,CAAC,CAC3B,CAAC,CAAC,CACGO,KAAK,CAAC,SAACC,GAAG,QAAKH,QAAO,CAACC,GAAG,CAACE,GAAG,CAAC,GAAC,CACzC,CAAC,CAAE,CAACtB,KAAK,CAAC,CAAC,CACX,MAAO,CAAEF,aAAa,CAAbA,aAAc,CAAC,CAC5B,CAAC,CAED,cAAeF,eAAc"},"metadata":{},"sourceType":"module"}