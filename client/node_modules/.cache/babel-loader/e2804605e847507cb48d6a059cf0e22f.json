{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{LoadingButton}from'@mui/lab';import{Grid,Box,TextField,CardMedia,Snackbar,SnackbarContent,Typography}from'@mui/material';import axios from'axios';import React from'react';import{useHistory}from'react-router-dom';import GetWebSet from'../utils/GetWebSet';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RecoveryAdmin=function RecoveryAdmin(props){var _GetWebSet=GetWebSet(),web_set=_GetWebSet.web_set;var _React$useState=React.useState({password:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var history=useHistory();function modifyAdmin(){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/user/modify_admin\"),{email:state.email,password:state.password},{headers:{Authorization:\"Bearer \"+props.match.params.id}}).then(function(res){console.log(res.data);if(!res.data.success){return setState(_objectSpread(_objectSpread({},state),{},{snack:true,snack_msg:\"Ops. it seems your recovery link has been expired, Please send email again.\",loading:false,snack_clr:\"red\"}));}setState(_objectSpread(_objectSpread({},state),{},{snack:true,snack_msg:\"User has been updated you are now redirecting to the login page...\",loading:false,snack_clr:'green'}));setTimeout(function(){history.push('/admin/login');},3000);}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsxs(Box,{minHeight:'100vh',bgcolor:\"black\",children:[/*#__PURE__*/_jsx(Snackbar,{open:state.snack,onClose:function onClose(){return setState(_objectSpread(_objectSpread({},state),{},{snack:false}));},children:/*#__PURE__*/_jsx(SnackbarContent,{sx:{backgroundColor:state.snack_clr},message:state.snack_msg,autoHideDuration:5000})}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justifyContent:\"center\",style:{minHeight:'100vh'},children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Box,{minWidth:'50vh',children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,direction:\"column\",children:[/*#__PURE__*/_jsx(Grid,{item:true,children:web_set&&/*#__PURE__*/_jsx(CardMedia,{component:'img',sx:{height:100,width:100,borderRadius:2},image:\"/images/\".concat(web_set.logo)})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{color:\"white\",children:\"Congo Admin! Here you can add your new password.\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(TextField,{size:\"small\",onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{password:e.target.value}));},label:\"New Password\",helperText:'required',fullWidth:true})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(LoadingButton,{disabled:state.password.length<8?true:false,loading:state.loading,onClick:modifyAdmin,size:\"large\",variant:\"contained\",fullWidth:true,children:\"Go\"})})]})})})})]});};export default RecoveryAdmin;","map":{"version":3,"names":["LoadingButton","Grid","Box","TextField","CardMedia","Snackbar","SnackbarContent","Typography","axios","React","useHistory","GetWebSet","RecoveryAdmin","props","web_set","useState","password","state","setState","history","modifyAdmin","loading","post","process","env","REACT_APP_BASE_URL","email","headers","Authorization","match","params","id","then","res","console","log","data","success","snack","snack_msg","snack_clr","setTimeout","push","catch","err","backgroundColor","minHeight","height","width","borderRadius","logo","e","target","value","length"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/recovery/RecoverAdmin.js"],"sourcesContent":["import { LoadingButton } from '@mui/lab'\r\nimport { Grid, Box, TextField, CardMedia, Snackbar, SnackbarContent, Typography } from '@mui/material'\r\nimport axios from 'axios'\r\nimport React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport GetWebSet from '../utils/GetWebSet'\r\n\r\n\r\nconst RecoveryAdmin = (props) => {\r\n    const { web_set } = GetWebSet()\r\n    const [state, setState] = React.useState({\r\n        password: \"\"\r\n    })\r\n    const history = useHistory()\r\n\r\n    function modifyAdmin() {\r\n        setState({ ...state, loading: true })\r\n        axios.post(`${process.env.REACT_APP_BASE_URL}/api/user/modify_admin`, {\r\n            email: state.email,\r\n            password: state.password\r\n        }, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + props.match.params.id\r\n            }\r\n        }).then((res) => {\r\n            console.log(res.data)\r\n            if (!res.data.success) {\r\n                return setState({ ...state, snack: true, snack_msg: \"Ops. it seems your recovery link has been expired, Please send email again.\", loading: false, snack_clr: \"red\" })\r\n            }\r\n            setState({ ...state, snack: true, snack_msg: \"User has been updated you are now redirecting to the login page...\", loading: false, snack_clr: 'green' })\r\n            setTimeout(() => {\r\n                history.push('/admin/login')\r\n            }, 3000);\r\n        }).catch((err) => console.log(err))\r\n    }\r\n\r\n    return (\r\n        <Box minHeight={'100vh'} bgcolor='black' >\r\n            <Snackbar open={state.snack} onClose={() => setState({ ...state, snack: false })} >\r\n                <SnackbarContent sx={{ backgroundColor: state.snack_clr }} message={state.snack_msg} autoHideDuration={5000} />\r\n            </Snackbar>\r\n            <Grid\r\n                container\r\n                spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                justifyContent=\"center\"\r\n                style={{ minHeight: '100vh' }}\r\n            >\r\n                <Grid item >\r\n                    <Box minWidth={'50vh'}>\r\n                        <Grid container spacing={2} direction='column' >\r\n                            <Grid item>\r\n                                {\r\n                                    web_set && (\r\n                                        <CardMedia component={'img'} sx={{ height: 100, width: 100, borderRadius: 2 }} image={`/images/${web_set.logo}`} />\r\n                                    )\r\n                                }\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <Typography color='white' >Congo Admin! Here you can add your new password.</Typography>\r\n                            </Grid>\r\n                            {/* <Grid item>\r\n                                <TextField onChange={(e) => setState({ ...state, email: e.target.value })} label=\"New Email\" helperText={'optional'} fullWidth />\r\n                            </Grid> */}\r\n                            <Grid item>\r\n                                <TextField size='small' onChange={(e) => setState({ ...state, password: e.target.value })} label=\"New Password\" helperText={'required'} fullWidth />\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <LoadingButton disabled={state.password.length < 8 ? true : false} loading={state.loading} onClick={modifyAdmin} size='large' variant='contained' fullWidth >Go</LoadingButton>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Box>\r\n                </Grid>\r\n\r\n            </Grid>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default RecoveryAdmin"],"mappings":"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"},"metadata":{},"sourceType":"module"}