{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Box,Divider,LinearProgress,Stack,TextField,Typography}from'@mui/material';import{LoadingButton}from'@mui/lab';import GetUserByToken from'../../../utils/GetUserByToken';import axios from'axios';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateProfile=function UpdateProfile(){var _GetUserByToken=GetUserByToken(),user_by_token=_GetUserByToken.user_by_token;var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),user=_React$useState2[0],setUser=_React$useState2[1];React.useEffect(function(){if(!user_by_token){return;}setUser(_objectSpread({},user_by_token));},[user_by_token]);var token=localStorage.getItem(process.env.REACT_APP_TOKEN+\"_user\");var history=useHistory();function updateUser(){axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/user/update\"),user,{headers:{Authorization:\"Bearer \"+token}}).then(function(res){alert(res.data.msg);localStorage.removeItem(process.env.REACT_APP_TOKEN+\"_user\");history.push('/user');}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsxs(Box,{p:2,children:[/*#__PURE__*/_jsx(Stack,{direction:'row',alignItems:\"center\",children:/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",children:\"Update Profile\"})}),/*#__PURE__*/_jsx(Box,{mt:2,mb:2,children:/*#__PURE__*/_jsx(Divider,{})}),user.email?/*#__PURE__*/_jsxs(Stack,{direction:'column',spacing:2,children:[/*#__PURE__*/_jsx(TextField,{onChange:function onChange(e){return setUser(_objectSpread(_objectSpread({},user),{},{name:e.target.value}));},value:user.name,label:\"Name\",size:\"small\",fullWidth:true}),/*#__PURE__*/_jsx(TextField,{onChange:function onChange(e){return setUser(_objectSpread(_objectSpread({},user),{},{email:e.target.value}));},value:user.email,label:\"Email\",size:\"small\",fullWidth:true}),/*#__PURE__*/_jsx(TextField,{onChange:function onChange(e){return setUser(_objectSpread(_objectSpread({},user),{},{new_password:e.target.value}));},helperText:\"Leave it blank if you dont wanna change the password\",label:\"Password\",size:\"small\",fullWidth:true}),/*#__PURE__*/_jsx(LoadingButton,{onClick:updateUser,fullWidth:true,variant:\"contained\",size:\"small\",children:\"Update\"})]}):/*#__PURE__*/_jsx(LinearProgress,{})]});};export default UpdateProfile;","map":{"version":3,"names":["React","Box","Divider","LinearProgress","Stack","TextField","Typography","LoadingButton","GetUserByToken","axios","useHistory","UpdateProfile","user_by_token","useState","user","setUser","useEffect","token","localStorage","getItem","process","env","REACT_APP_TOKEN","history","updateUser","post","REACT_APP_BASE_URL","headers","Authorization","then","res","alert","data","msg","removeItem","push","catch","err","console","log","email","e","name","target","value","new_password"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/user/pages/profile/UpdateProfile.js"],"sourcesContent":["import React from 'react'\r\nimport { Box, Divider, LinearProgress, Stack, TextField, Typography } from '@mui/material'\r\nimport { LoadingButton } from '@mui/lab'\r\nimport GetUserByToken from '../../../utils/GetUserByToken'\r\nimport axios from 'axios'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst UpdateProfile = () => {\r\n    const { user_by_token } = GetUserByToken()\r\n    const [user, setUser] = React.useState({})\r\n    React.useEffect(() => {\r\n        if (!user_by_token) {\r\n            return\r\n        }\r\n        setUser({ ...user_by_token })\r\n    }, [user_by_token])\r\n    const token = localStorage.getItem(process.env.REACT_APP_TOKEN + \"_user\")\r\n    const history = useHistory()\r\n\r\n    function updateUser() {\r\n        axios.post(`${process.env.REACT_APP_BASE_URL}/api/user/update`, user, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        }).then((res) => {\r\n            alert(res.data.msg)\r\n            localStorage.removeItem(process.env.REACT_APP_TOKEN + \"_user\")\r\n            history.push('/user')\r\n        }).catch((err) => console.log(err))\r\n    }\r\n\r\n    return (\r\n        <Box p={2} >\r\n            <Stack direction={'row'} alignItems='center'>\r\n                <Typography fontWeight=\"bold\" >Update Profile</Typography>\r\n            </Stack>\r\n            <Box mt={2} mb={2}>\r\n                <Divider />\r\n            </Box>\r\n\r\n            {\r\n                user.email ? (\r\n                    <Stack direction={'column'} spacing={2}>\r\n                        <TextField onChange={(e) => setUser({ ...user, name: e.target.value })} value={user.name} label=\"Name\" size='small' fullWidth />\r\n                        <TextField onChange={(e) => setUser({ ...user, email: e.target.value })} value={user.email} label=\"Email\" size='small' fullWidth />\r\n                        <TextField onChange={(e) => setUser({ ...user, new_password: e.target.value })} helperText='Leave it blank if you dont wanna change the password' label=\"Password\" size='small' fullWidth />\r\n\r\n                        <LoadingButton onClick={updateUser} fullWidth variant='contained' size='small' >Update</LoadingButton>\r\n                    </Stack>\r\n                ) : (\r\n                    <LinearProgress />\r\n                )\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default UpdateProfile"],"mappings":"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"},"metadata":{},"sourceType":"module"}