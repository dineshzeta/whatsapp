{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Box,Stack,Typography,Divider,TextField,LinearProgress}from'@mui/material';import{LoadingButton}from'@mui/lab';import axios from'axios';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileSet=function ProfileSet(){var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var token=localStorage.getItem(process.env.REACT_APP_TOKEN+\"_admin\");var history=useHistory();function getEmail(){axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/user/get_admin_email\"),{headers:{Authorization:\"Bearer \"+token}}).then(function(res){setState(_objectSpread(_objectSpread({},state),{},{email:res.data.email}));}).catch(function(err){return console.log(err);});}React.useEffect(function(){if(!token){return;}getEmail();},[token]);function updateProfile(){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/user/change_admin_pw\"),state,{headers:{Authorization:\"Bearer \"+token}}).then(function(res){alert(res.data.msg);if(res.data.success){localStorage.removeItem(process.env.REACT_APP_TOKEN+\"_admin\");history.push('/admin');}setState(_objectSpread(_objectSpread({},state),{},{loading:false}));}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsxs(Box,{p:2,children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Stack,{justifyContent:'space-between',alignItems:\"center\",direction:'row',spacing:2,children:/*#__PURE__*/_jsx(Typography,{fontWeight:'bold',children:\"Admin Profile\"})})}),/*#__PURE__*/_jsx(Box,{mt:2,mb:2,children:/*#__PURE__*/_jsx(Divider,{})}),state.email?/*#__PURE__*/_jsxs(Stack,{direction:'column',spacing:2,children:[/*#__PURE__*/_jsx(TextField,{onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{email:e.target.value}));},value:state.email,label:\"Email\",fullWidth:true,size:\"small\"}),/*#__PURE__*/_jsx(TextField,{onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{new_password:e.target.value}));},label:\"Password\",helperText:\"Leave it blank if you dont wanna change it\",fullWidth:true,size:\"small\"}),/*#__PURE__*/_jsx(LoadingButton,{loading:state.loading,onClick:updateProfile,size:\"small\",fullWidth:true,variant:\"contained\",children:\"Update\"})]}):/*#__PURE__*/_jsx(LinearProgress,{})]});};export default ProfileSet;","map":{"version":3,"names":["React","Box","Stack","Typography","Divider","TextField","LinearProgress","LoadingButton","axios","useHistory","ProfileSet","useState","state","setState","token","localStorage","getItem","process","env","REACT_APP_TOKEN","history","getEmail","get","REACT_APP_BASE_URL","headers","Authorization","then","res","email","data","catch","err","console","log","useEffect","updateProfile","loading","post","alert","msg","success","removeItem","push","e","target","value","new_password"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/admin/pages/profile/ProfileSet.js"],"sourcesContent":["import React from 'react'\r\nimport { Box, Stack, Typography, Divider, TextField, LinearProgress } from '@mui/material'\r\nimport { LoadingButton } from '@mui/lab'\r\nimport axios from 'axios'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst ProfileSet = () => {\r\n    const [state, setState] = React.useState({})\r\n    const token = localStorage.getItem(process.env.REACT_APP_TOKEN + \"_admin\")\r\n    const history = useHistory()\r\n\r\n    function getEmail() {\r\n        axios.get(`${process.env.REACT_APP_BASE_URL}/api/user/get_admin_email`, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        }).then((res) => {\r\n            setState({ ...state, email: res.data.email })\r\n        })\r\n            .catch((err) => console.log(err))\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (!token) {\r\n            return\r\n        }\r\n        getEmail()\r\n    }, [token])\r\n\r\n    function updateProfile() {\r\n        setState({ ...state, loading: true })\r\n        axios.post(`${process.env.REACT_APP_BASE_URL}/api/user/change_admin_pw`, state, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        }).then((res) => {\r\n            alert(res.data.msg)\r\n            if (res.data.success) {\r\n                localStorage.removeItem(process.env.REACT_APP_TOKEN + \"_admin\")\r\n                history.push('/admin')\r\n            }\r\n            setState({ ...state, loading: false })\r\n        }).catch((err) => console.log(err))\r\n    }\r\n\r\n    return (\r\n        <Box p={2} >\r\n            <Box>\r\n                <Stack justifyContent={'space-between'} alignItems='center' direction={'row'} spacing={2}>\r\n                    <Typography fontWeight={'bold'} >Admin Profile</Typography>\r\n                </Stack>\r\n            </Box>\r\n            <Box mt={2} mb={2}>\r\n                <Divider />\r\n            </Box>\r\n\r\n            {\r\n                state.email ? (\r\n                    <Stack direction={'column'} spacing={2}>\r\n                        <TextField onChange={(e) => setState({ ...state, email: e.target.value })} value={state.email} label=\"Email\" fullWidth size='small' />\r\n                        <TextField onChange={(e) => setState({ ...state, new_password: e.target.value })} label=\"Password\" helperText=\"Leave it blank if you dont wanna change it\" fullWidth size='small' />\r\n                        <LoadingButton loading={state.loading} onClick={updateProfile} size='small' fullWidth variant='contained' >Update</LoadingButton>\r\n                    </Stack>\r\n                ) : <LinearProgress />\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default ProfileSet"],"mappings":"iRAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,GAAG,CAAEC,KAAK,CAAEC,UAAU,CAAEC,OAAO,CAAEC,SAAS,CAAEC,cAAc,KAAQ,eAAe,CAC1F,OAASC,aAAa,KAAQ,UAAU,CACxC,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,UAAU,KAAQ,kBAAkB,yFAE7C,GAAMC,WAAU,CAAG,QAAbA,WAAU,EAAS,CACrB,oBAA0BV,KAAK,CAACW,QAAQ,CAAC,CAAC,CAAC,CAAC,oDAArCC,KAAK,qBAAEC,QAAQ,qBACtB,GAAMC,MAAK,CAAGC,YAAY,CAACC,OAAO,CAACC,OAAO,CAACC,GAAG,CAACC,eAAe,CAAG,QAAQ,CAAC,CAC1E,GAAMC,QAAO,CAAGX,UAAU,EAAE,CAE5B,QAASY,SAAQ,EAAG,CAChBb,KAAK,CAACc,GAAG,WAAIL,OAAO,CAACC,GAAG,CAACK,kBAAkB,8BAA6B,CACpEC,OAAO,CAAE,CACLC,aAAa,CAAE,SAAS,CAAGX,KAC/B,CACJ,CAAC,CAAC,CAACY,IAAI,CAAC,SAACC,GAAG,CAAK,CACbd,QAAQ,gCAAMD,KAAK,MAAEgB,KAAK,CAAED,GAAG,CAACE,IAAI,CAACD,KAAK,GAAG,CACjD,CAAC,CAAC,CACGE,KAAK,CAAC,SAACC,GAAG,QAAKC,QAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CACzC,CAEA/B,KAAK,CAACkC,SAAS,CAAC,UAAM,CAClB,GAAI,CAACpB,KAAK,CAAE,CACR,OACJ,CACAO,QAAQ,EAAE,CACd,CAAC,CAAE,CAACP,KAAK,CAAC,CAAC,CAEX,QAASqB,cAAa,EAAG,CACrBtB,QAAQ,gCAAMD,KAAK,MAAEwB,OAAO,CAAE,IAAI,GAAG,CACrC5B,KAAK,CAAC6B,IAAI,WAAIpB,OAAO,CAACC,GAAG,CAACK,kBAAkB,8BAA6BX,KAAK,CAAE,CAC5EY,OAAO,CAAE,CACLC,aAAa,CAAE,SAAS,CAAGX,KAC/B,CACJ,CAAC,CAAC,CAACY,IAAI,CAAC,SAACC,GAAG,CAAK,CACbW,KAAK,CAACX,GAAG,CAACE,IAAI,CAACU,GAAG,CAAC,CACnB,GAAIZ,GAAG,CAACE,IAAI,CAACW,OAAO,CAAE,CAClBzB,YAAY,CAAC0B,UAAU,CAACxB,OAAO,CAACC,GAAG,CAACC,eAAe,CAAG,QAAQ,CAAC,CAC/DC,OAAO,CAACsB,IAAI,CAAC,QAAQ,CAAC,CAC1B,CACA7B,QAAQ,gCAAMD,KAAK,MAAEwB,OAAO,CAAE,KAAK,GAAG,CAC1C,CAAC,CAAC,CAACN,KAAK,CAAC,SAACC,GAAG,QAAKC,QAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CACvC,CAEA,mBACI,MAAC,GAAG,EAAC,CAAC,CAAE,CAAE,wBACN,KAAC,GAAG,wBACA,KAAC,KAAK,EAAC,cAAc,CAAE,eAAgB,CAAC,UAAU,CAAC,QAAQ,CAAC,SAAS,CAAE,KAAM,CAAC,OAAO,CAAE,CAAE,uBACrF,KAAC,UAAU,EAAC,UAAU,CAAE,MAAO,2BAA4B,EACvD,EACN,cACN,KAAC,GAAG,EAAC,EAAE,CAAE,CAAE,CAAC,EAAE,CAAE,CAAE,uBACd,KAAC,OAAO,IAAG,EACT,CAGFnB,KAAK,CAACgB,KAAK,cACP,MAAC,KAAK,EAAC,SAAS,CAAE,QAAS,CAAC,OAAO,CAAE,CAAE,wBACnC,KAAC,SAAS,EAAC,QAAQ,CAAE,kBAACe,CAAC,QAAK9B,SAAQ,gCAAMD,KAAK,MAAEgB,KAAK,CAAEe,CAAC,CAACC,MAAM,CAACC,KAAK,GAAG,EAAC,CAAC,KAAK,CAAEjC,KAAK,CAACgB,KAAM,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,MAAC,IAAI,CAAC,OAAO,EAAG,cACtI,KAAC,SAAS,EAAC,QAAQ,CAAE,kBAACe,CAAC,QAAK9B,SAAQ,gCAAMD,KAAK,MAAEkC,YAAY,CAAEH,CAAC,CAACC,MAAM,CAACC,KAAK,GAAG,EAAC,CAAC,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,4CAA4C,CAAC,SAAS,MAAC,IAAI,CAAC,OAAO,EAAG,cACpL,KAAC,aAAa,EAAC,OAAO,CAAEjC,KAAK,CAACwB,OAAQ,CAAC,OAAO,CAAED,aAAc,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,MAAC,OAAO,CAAC,WAAW,oBAAwB,GAC7H,cACR,KAAC,cAAc,IAAG,GAExB,CAEd,CAAC,CAED,cAAezB,WAAU"},"metadata":{},"sourceType":"module"}