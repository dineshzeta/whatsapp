{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Delete}from'@mui/icons-material';import{Box,Divider,Typography,Stack,IconButton,LinearProgress}from'@mui/material';import axios from'axios';import moment from'moment';import React from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MsgHistory=function MsgHistory(){var _state$campaign,_state$campaign2;var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var token=localStorage.getItem(process.env.REACT_APP_TOKEN+\"_user\");function getCam(){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/user/get_campaign\"),{headers:{Authorization:\"Bearer \"+token}}).then(function(res){if(!res.data.success){alert(res.data.msg);}setState(_objectSpread(_objectSpread({},state),{},{campaign:res.data.data,loading:false}));}).catch(function(err){return console.log(err);});}React.useEffect(function(){if(!token){return;}getCam();},[token]);function delCam(e){if(window.confirm(\"Are your sure?\")){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/user/delete_campaign\"),{id:e},{headers:{Authorization:\"Bearer \"+token}}).then(function(res){alert(res.data.msg);getCam();setState(_objectSpread(_objectSpread({},state),{},{loading:false}));}).catch(function(err){return console.log(err);});}}return/*#__PURE__*/_jsxs(Box,{p:2,children:[/*#__PURE__*/_jsx(Stack,{direction:'row',alignItems:\"center\",children:/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",children:\"Campaign History\"})}),/*#__PURE__*/_jsx(Box,{mt:2,mb:2,children:/*#__PURE__*/_jsx(Divider,{})}),state.loading?/*#__PURE__*/_jsx(LinearProgress,{}):((_state$campaign=state.campaign)===null||_state$campaign===void 0?void 0:_state$campaign.length)>0?/*#__PURE__*/_jsx(Stack,{direction:'column',spacing:2,children:(_state$campaign2=state.campaign)===null||_state$campaign2===void 0?void 0:_state$campaign2.map(function(i,key){return/*#__PURE__*/_jsx(Box,{bgcolor:'black',p:2,borderRadius:2,children:/*#__PURE__*/_jsxs(Stack,{direction:'row',justifyContent:\"space-between\",spacing:2,alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Stack,{direction:'column',children:[/*#__PURE__*/_jsx(Typography,{children:moment(i.created_at).fromNow()}),/*#__PURE__*/_jsxs(Typography,{color:\"gray\",variant:\"caption\",children:[\"Total: \",i.total_msg,\", Sent: \",i.sent_msg]})]}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return delCam(i.id);},color:\"error\",children:/*#__PURE__*/_jsx(Delete,{})})]})},key);})}):/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"gray\",children:\"No Plan found\"})]});};export default MsgHistory;","map":{"version":3,"names":["Delete","Box","Divider","Typography","Stack","IconButton","LinearProgress","axios","moment","React","MsgHistory","useState","state","setState","token","localStorage","getItem","process","env","REACT_APP_TOKEN","getCam","loading","get","REACT_APP_BASE_URL","headers","Authorization","then","res","data","success","alert","msg","campaign","catch","err","console","log","useEffect","delCam","e","window","confirm","post","id","length","map","i","key","created_at","fromNow","total_msg","sent_msg"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/user/pages/msg-history/MsgHistory.js"],"sourcesContent":["import { Delete } from '@mui/icons-material'\r\nimport { Box, Divider, Typography, Stack, IconButton, LinearProgress } from '@mui/material'\r\nimport axios from 'axios'\r\nimport moment from 'moment'\r\nimport React from 'react'\r\n\r\nconst MsgHistory = () => {\r\n    const [state, setState] = React.useState({})\r\n    const token = localStorage.getItem(process.env.REACT_APP_TOKEN + \"_user\")\r\n\r\n    function getCam() {\r\n        setState({ ...state, loading: true })\r\n        axios.get(`${process.env.REACT_APP_BASE_URL}/api/user/get_campaign`, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        }).then((res) => {\r\n            if (!res.data.success) {\r\n                alert(res.data.msg)\r\n            }\r\n            setState({ ...state, campaign: res.data.data, loading: false })\r\n        }).catch((err) => console.log(err))\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (!token) {\r\n            return\r\n        }\r\n        getCam()\r\n    }, [token])\r\n\r\n    function delCam(e) {\r\n        if (window.confirm(\"Are your sure?\")) {\r\n            setState({ ...state, loading: true })\r\n            axios.post(`${process.env.REACT_APP_BASE_URL}/api/user/delete_campaign`, {\r\n                id: e\r\n            }, {\r\n                headers: {\r\n                    Authorization: \"Bearer \" + token\r\n                }\r\n            }).then((res) => {\r\n                alert(res.data.msg)\r\n                getCam()\r\n                setState({ ...state, loading: false })\r\n            }).catch((err) => console.log(err))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Box p={2} >\r\n            <Stack direction={'row'} alignItems='center'>\r\n                <Typography fontWeight=\"bold\" >Campaign History</Typography>\r\n            </Stack>\r\n            <Box mt={2} mb={2}>\r\n                <Divider />\r\n            </Box>\r\n\r\n            {\r\n                state.loading ? (\r\n                    <LinearProgress />\r\n                ) : (\r\n                    state.campaign?.length > 0 ? (\r\n                        <Stack direction={'column'} spacing={2}>\r\n                            {\r\n                                state.campaign?.map((i, key) => {\r\n                                    return (\r\n                                        <Box key={key} bgcolor={'black'} p={2} borderRadius={2}>\r\n                                            <Stack direction={'row'} justifyContent='space-between' spacing={2} alignItems='center'>\r\n                                                <Stack direction={'column'}>\r\n                                                    <Typography>{moment(i.created_at).fromNow()}</Typography>\r\n                                                    <Typography color='gray' variant='caption'>Total: {i.total_msg}, Sent: {i.sent_msg}</Typography>\r\n                                                </Stack>\r\n                                                <IconButton onClick={() => delCam(i.id)} color='error' >\r\n                                                    <Delete />\r\n                                                </IconButton>\r\n                                            </Stack>\r\n                                        </Box>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </Stack>\r\n                    ) : <Typography variant='caption' color='gray'>No Plan found</Typography>\r\n                )\r\n            }\r\n\r\n\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default MsgHistory"],"mappings":"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"},"metadata":{},"sourceType":"module"}