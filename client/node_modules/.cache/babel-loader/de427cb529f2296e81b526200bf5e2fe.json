{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Dialog,Grid,IconButton,TextField,Typography,Stack}from'@mui/material';import{Box,Container}from'@mui/system';import{LoadingButton}from'@mui/lab';import React from'react';import axios from'axios';import{useHistory}from'react-router-dom';import{Close}from'@mui/icons-material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginAdmin=function LoginAdmin(){var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var history=useHistory();function tryLogin(){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/admin/login\"),{email:state.email,password:state.password}).then(function(res){setState(_objectSpread(_objectSpread({},state),{},{loading:false}));if(res.data.success){localStorage.setItem(process.env.REACT_APP_TOKEN+\"_admin\",res.data.token);history.push('/admin');return;}alert(res.data.msg);console.log(res.data);}).catch(function(err){console.log(err);setState(_objectSpread(_objectSpread({},state),{},{loading:false}));});}function tryRecovery(){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/user/send_recovery_link_admin\"),{email:state.recovery_email}).then(function(res){alert(res.data.msg);setState(_objectSpread(_objectSpread({},state),{},{loading:false,dialog:false}));}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsx(Grid,{container:true,direction:'column',height:'100vh',alignItems:\"center\",justifyContent:'center',bgcolor:\"black\",children:/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Dialog,{open:state.dialog,onClose:function onClose(){setState(_objectSpread(_objectSpread({},state),{},{dialog:false}));},fullScreen:true,children:/*#__PURE__*/_jsxs(Box,{minHeight:'100vh',bgcolor:'black',p:2,children:[/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setState(_objectSpread(_objectSpread({},state),{},{dialog:false}));},children:/*#__PURE__*/_jsx(Close,{})}),/*#__PURE__*/_jsx(Grid,{container:true,minHeight:'80vh',alignItems:\"center\",justifyContent:'center',children:/*#__PURE__*/_jsx(Grid,{minWidth:400,item:true,children:/*#__PURE__*/_jsxs(Stack,{alignItems:'flex-start',direction:'column',spacing:2,children:[/*#__PURE__*/_jsx(TextField,{onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{recovery_email:e.target.value}));},size:\"small\",label:\"Enter your email\",fullWidth:true}),/*#__PURE__*/_jsx(LoadingButton,{onClick:tryRecovery,disabled:state.recovery_email?false:true,loading:state.loading,children:\"Send a recover link\"})]})})})]})}),/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",children:/*#__PURE__*/_jsx(Box,{p:4,borderRadius:4,bgcolor:\"#212121\",children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{sx:{padding:5},color:\"white\",align:\"center\",variant:\"h2\",children:\"Admin Panel\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(TextField,{onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{email:e.target.value}));},label:\"Email\",fullWidth:true})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(TextField,{onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{password:e.target.value}));},label:\"Password\",type:\"password\",fullWidth:true})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){setState(_objectSpread(_objectSpread({},state),{},{dialog:true}));},style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"gray\",children:\"Forget password?\"})})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(LoadingButton,{loading:state.loading,onClick:tryLogin,disabled:state.email&&state.password?false:true,fullWidth:true,contained:true,color:\"inherit\",variant:\"contained\",sx:{borderRadius:10},children:\"Try\"})})]})})})]})});};export default LoginAdmin;","map":{"version":3,"names":["Dialog","Grid","IconButton","TextField","Typography","Stack","Box","Container","LoadingButton","React","axios","useHistory","Close","LoginAdmin","useState","state","setState","history","tryLogin","loading","post","process","env","REACT_APP_BASE_URL","email","password","then","res","data","success","localStorage","setItem","REACT_APP_TOKEN","token","push","alert","msg","console","log","catch","err","tryRecovery","recovery_email","dialog","e","target","value","padding","cursor","borderRadius"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/admin/LoginAdmin.js"],"sourcesContent":["import { Dialog, Grid, IconButton, TextField, Typography, Stack } from '@mui/material'\r\nimport { Box, Container } from '@mui/system'\r\nimport { LoadingButton } from '@mui/lab'\r\nimport React from 'react'\r\nimport axios from 'axios'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { Close } from '@mui/icons-material'\r\n\r\nconst LoginAdmin = () => {\r\n    const [state, setState] = React.useState({})\r\n    const history = useHistory()\r\n\r\n    function tryLogin() {\r\n        setState({ ...state, loading: true })\r\n        axios.post(`${process.env.REACT_APP_BASE_URL}/api/admin/login`, {\r\n            email: state.email,\r\n            password: state.password\r\n        }).then((res) => {\r\n            setState({ ...state, loading: false })\r\n            if (res.data.success) {\r\n                localStorage.setItem(process.env.REACT_APP_TOKEN + \"_admin\", res.data.token)\r\n                history.push('/admin')\r\n                return\r\n            }\r\n            alert(res.data.msg)\r\n            console.log(res.data)\r\n        }).catch((err) => {\r\n            console.log(err)\r\n            setState({ ...state, loading: false })\r\n        })\r\n    }\r\n\r\n\r\n    function tryRecovery() {\r\n        setState({ ...state, loading: true })\r\n        axios.post(`${process.env.REACT_APP_BASE_URL}/api/user/send_recovery_link_admin`, {\r\n            email: state.recovery_email\r\n        }).then((res) => {\r\n            alert(res.data.msg)\r\n            setState({ ...state, loading: false, dialog: false })\r\n        }).catch((err) => console.log(err))\r\n    }\r\n\r\n    return (\r\n        <Grid container direction={'column'} height={'100vh'} alignItems='center' justifyContent={'center'} bgcolor='black'>\r\n            <Grid item>\r\n\r\n                <Dialog open={state.dialog} onClose={() => {\r\n                    setState({ ...state, dialog: false })\r\n                }} fullScreen >\r\n                    <Box minHeight={'100vh'} bgcolor={'black'} p={2}>\r\n                        <IconButton onClick={() => setState({ ...state, dialog: false })} >\r\n                            <Close />\r\n                        </IconButton>\r\n                        <Grid container minHeight={'80vh'} alignItems='center' justifyContent={'center'}>\r\n                            <Grid minWidth={400} item>\r\n                                <Stack alignItems={'flex-start'} direction={'column'} spacing={2} >\r\n                                    <TextField onChange={(e) => setState({ ...state, recovery_email: e.target.value })} size='small' label=\"Enter your email\" fullWidth />\r\n                                    <LoadingButton onClick={tryRecovery} disabled={state.recovery_email ? false : true} loading={state.loading} >Send a recover link</LoadingButton>\r\n                                </Stack>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Box>\r\n                </Dialog>\r\n\r\n                <Container maxWidth='lg'>\r\n                    <Box p={4} borderRadius={4} bgcolor='#212121'>\r\n                        <Grid container direction=\"column\" spacing={2}>\r\n                            <Grid item>\r\n                                <Typography sx={{ padding: 5 }} color='white' align='center' variant='h2' >Admin Panel</Typography>\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <TextField onChange={(e) => setState({ ...state, email: e.target.value })} label=\"Email\" fullWidth />\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <TextField onChange={(e) => setState({ ...state, password: e.target.value })} label=\"Password\" type='password' fullWidth />\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <a onClick={() => {\r\n                                    setState({ ...state, dialog: true })\r\n                                }} style={{ cursor: 'pointer' }} >\r\n                                    <Typography variant='caption' color='gray' >Forget password?</Typography>\r\n                                </a>\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <LoadingButton loading={state.loading} onClick={tryLogin} disabled={state.email && state.password ? false : true} fullWidth contained color='inherit' variant='contained' sx={{ borderRadius: 10 }} >Try</LoadingButton>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Box>\r\n                </Container>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default LoginAdmin"],"mappings":"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"},"metadata":{},"sourceType":"module"}