{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\Whatshub_v1.2\\\\client\\\\src\\\\admin\\\\pages\\\\manage-plans\\\\ManagePlans.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Box, Button, Dialog, Divider, IconButton, LinearProgress, Typography } from '@mui/material';\nimport { Stack } from '@mui/system';\nimport DialogHeader from '../../../common/DialogHeader';\nimport { Close, Delete } from '@mui/icons-material';\nimport AddPlan from './AddPlan';\nimport { GlobalContext } from '../../../context/GlobalContext';\nimport GetPlans from '../../../utils/GetPlans';\nimport axios from 'axios';\nimport GetTokenAdmin from '../../../utils/GetTokenAdmin';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ManagePlans = () => {\n  _s();\n  const [state, setState] = React.useState({\n    dialog: false\n  });\n  const globalContext = React.useContext(GlobalContext);\n  const {\n    plan_data\n  } = GetPlans();\n  const {\n    token_admin\n  } = GetTokenAdmin();\n  async function deletePlan(e) {\n    if (window.confirm(\"Are you sure?\")) {\n      setState({\n        ...state,\n        loading: true\n      });\n      const res = await axios.post(`${process.env.REACT_APP_BASE_URL}/api/plan/delete`, {\n        id: e.id\n      }, {\n        headers: {\n          Authorization: \"Bearer \" + token_admin\n        }\n      });\n      alert(res.data.msg);\n      if (!res.data.success) {\n        console.log(res.data);\n        return;\n      }\n      removeArr(e);\n    }\n  }\n  function removeArr(e) {\n    const update = globalContext.data.plan_data.filter(i => i !== e);\n    globalContext.setData({\n      ...globalContext.data,\n      plan_data: update\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    p: 2,\n    children: [/*#__PURE__*/_jsxDEV(Stack, {\n      alignItems: 'center',\n      direction: 'row',\n      justifyContent: \"space-between\",\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        fontWeight: 'bold',\n        children: \"Manage Plans\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => setState({\n          ...state,\n          dialog: true\n        }),\n        size: \"small\",\n        children: \"add new\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: 2,\n      mb: 2,\n      children: /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: state.dialog,\n      onClose: () => setState({\n        ...state,\n        dialog: false\n      }),\n      fullScreen: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogHeader, {\n        closebtn: /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => setState({\n            ...state,\n            dialog: false\n          }),\n          children: /*#__PURE__*/_jsxDEV(Close, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AddPlan, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Stack, {\n      direction: 'column',\n      spacing: 2,\n      children: globalContext.data.plan_data ? globalContext.data.plan_data.map((i, key) => {\n        return /*#__PURE__*/_jsxDEV(Box, {\n          borderRadius: 2,\n          bgcolor: \"#131313\",\n          p: 2,\n          children: /*#__PURE__*/_jsxDEV(Stack, {\n            direction: 'row',\n            justifyContent: \"space-between\",\n            children: [/*#__PURE__*/_jsxDEV(Stack, {\n              direction: 'column',\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                children: i.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"gray\",\n                children: [\"Message Limit: \", i.message_limit]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"gray\",\n                children: [\"Cost: \", i.cost]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              onClick: () => {\n                deletePlan(i);\n              },\n              color: \"error\",\n              children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 29\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(LinearProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 26\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n_s(ManagePlans, \"dztAK0TTo7+9bnnglEwPCdy6YH4=\");\n_c = ManagePlans;\nexport default ManagePlans;\nvar _c;\n$RefreshReg$(_c, \"ManagePlans\");","map":{"version":3,"names":["React","Box","Button","Dialog","Divider","IconButton","LinearProgress","Typography","Stack","DialogHeader","Close","Delete","AddPlan","GlobalContext","GetPlans","axios","GetTokenAdmin","ManagePlans","state","setState","useState","dialog","globalContext","useContext","plan_data","token_admin","deletePlan","e","window","confirm","loading","res","post","process","env","REACT_APP_BASE_URL","id","headers","Authorization","alert","data","msg","success","console","log","removeArr","update","filter","i","setData","map","key","name","message_limit","cost"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/admin/pages/manage-plans/ManagePlans.js"],"sourcesContent":["import React from 'react'\r\nimport { Box, Button, Dialog, Divider, IconButton, LinearProgress, Typography } from '@mui/material'\r\nimport { Stack } from '@mui/system'\r\nimport DialogHeader from '../../../common/DialogHeader'\r\nimport { Close, Delete } from '@mui/icons-material'\r\nimport AddPlan from './AddPlan'\r\nimport { GlobalContext } from '../../../context/GlobalContext'\r\nimport GetPlans from '../../../utils/GetPlans'\r\nimport axios from 'axios'\r\nimport GetTokenAdmin from '../../../utils/GetTokenAdmin'\r\n\r\nconst ManagePlans = () => {\r\n    const [state, setState] = React.useState({\r\n        dialog: false\r\n    })\r\n    const globalContext = React.useContext(GlobalContext)\r\n    const { plan_data } = GetPlans()\r\n    const { token_admin } = GetTokenAdmin()\r\n\r\n    async function deletePlan(e) {\r\n        if (window.confirm(\"Are you sure?\")) {\r\n            setState({ ...state, loading: true })\r\n            const res = await axios.post(`${process.env.REACT_APP_BASE_URL}/api/plan/delete`, {\r\n                id: e.id\r\n            }, {\r\n                headers: {\r\n                    Authorization: \"Bearer \" + token_admin\r\n                }\r\n            })\r\n            alert(res.data.msg)\r\n            if (!res.data.success) {\r\n                console.log(res.data)\r\n                return\r\n            }\r\n            removeArr(e)\r\n        }\r\n\r\n    }\r\n\r\n    function removeArr(e) {\r\n        const update = globalContext.data.plan_data.filter(i => i !== e)\r\n        globalContext.setData({ ...globalContext.data, plan_data: update })\r\n    }\r\n\r\n    return (\r\n        <Box p={2} >\r\n            <Stack alignItems={'center'} direction={'row'} justifyContent='space-between'>\r\n                <Typography fontWeight={'bold'} >Manage Plans</Typography>\r\n                <Button onClick={() => setState({ ...state, dialog: true })} size='small'>add new</Button>\r\n            </Stack>\r\n            <Box mt={2} mb={2}>\r\n                <Divider />\r\n            </Box>\r\n            <Dialog open={state.dialog} onClose={() => setState({ ...state, dialog: false })} fullScreen>\r\n                <DialogHeader\r\n                    closebtn={\r\n                        <IconButton onClick={() => setState({ ...state, dialog: false })} >\r\n                            <Close />\r\n                        </IconButton>}\r\n                />\r\n                <AddPlan />\r\n            </Dialog>\r\n\r\n            <Stack direction={'column'} spacing={2}>\r\n                {\r\n                    globalContext.data.plan_data ? globalContext.data.plan_data.map((i, key) => {\r\n                        return (\r\n                            <Box borderRadius={2} bgcolor='#131313' p={2}>\r\n                                <Stack direction={'row'} justifyContent='space-between'>\r\n                                    <Stack direction={'column'}>\r\n                                        <Typography>{i.name}</Typography>\r\n                                        <Typography variant='caption' color='gray'>Message Limit: {i.message_limit}</Typography>\r\n                                        <Typography variant='caption' color='gray'>Cost: {i.cost}</Typography>\r\n                                    </Stack>\r\n                                    <IconButton onClick={() => {\r\n                                        deletePlan(i)\r\n                                    }} color='error' >\r\n                                        <Delete />\r\n                                    </IconButton>\r\n                                </Stack>\r\n                            </Box>\r\n                        )\r\n                    }) : <LinearProgress />\r\n                }\r\n            </Stack>\r\n\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default ManagePlans"],"mappings":"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"},"metadata":{},"sourceType":"module"}