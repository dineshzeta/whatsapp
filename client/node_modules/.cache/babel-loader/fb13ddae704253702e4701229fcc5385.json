{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"component\"];import axios from'axios';import React from'react';import{Route,Redirect}from'react-router-dom';import{LinearProgress}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";var PrivateRoute=function PrivateRoute(_ref){var Component=_ref.component,rest=_objectWithoutProperties(_ref,_excluded);var _React$useState=React.useState({loading:true}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];function checkAdmin(){var token=localStorage.getItem(process.env.REACT_APP_TOKEN+\"_admin\");axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/user/get_admin_by_token\"),{headers:{Authorization:\"Beare \"+token}}).then(function(res){if(!res.data.success){setState(_objectSpread(_objectSpread({},state),{},{loading:false,isLogin:false}));}else{setState(_objectSpread(_objectSpread({},state),{},{loading:false,isLogin:true}));}});}React.useEffect(function(){checkAdmin();},[]);return state.loading?/*#__PURE__*/_jsx(LinearProgress,{}):/*#__PURE__*/_jsx(Route,_objectSpread(_objectSpread({},rest),{},{render:function render(props){return state.isLogin?/*#__PURE__*/_jsx(Component,_objectSpread({},props)):/*#__PURE__*/_jsx(Redirect,{to:\"/admin/login\"});}}));};export default PrivateRoute;","map":{"version":3,"names":["axios","React","Route","Redirect","LinearProgress","PrivateRoute","Component","component","rest","useState","loading","state","setState","checkAdmin","token","localStorage","getItem","process","env","REACT_APP_TOKEN","get","REACT_APP_BASE_URL","headers","Authorization","then","res","data","success","isLogin","useEffect","props"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/routing/AdminRoute.js"],"sourcesContent":["import axios from 'axios';\r\nimport React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { LinearProgress } from '@mui/material'\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n    const [state, setState] = React.useState({\r\n        loading: true\r\n    })\r\n\r\n    function checkAdmin() {\r\n        const token = localStorage.getItem(process.env.REACT_APP_TOKEN + \"_admin\")\r\n        axios.get(`${process.env.REACT_APP_BASE_URL}/api/user/get_admin_by_token`, {\r\n            headers: {\r\n                Authorization: \"Beare \" + token\r\n            }\r\n        }).then((res) => {\r\n            if (!res.data.success) {\r\n                setState({ ...state, loading: false, isLogin: false })\r\n            } else {\r\n                setState({ ...state, loading: false, isLogin: true })\r\n            }\r\n        })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        checkAdmin()\r\n    }, [])\r\n\r\n    return (\r\n        state.loading ? (\r\n            <LinearProgress />\r\n        ) : (\r\n            <Route {...rest} render={props => (\r\n                state.isLogin ?\r\n                    <Component {...props} />\r\n                    : <Redirect to=\"/admin/login\" />\r\n            )} />\r\n        )\r\n    );\r\n};\r\n\r\nexport default PrivateRoute;"],"mappings":"0cAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CAClD,OAASC,cAAc,KAAQ,eAAe,4CAE9C,GAAMC,aAAY,CAAG,QAAfA,aAAY,MAA0C,IAAzBC,UAAS,MAApBC,SAAS,CAAgBC,IAAI,0CACjD,oBAA0BP,KAAK,CAACQ,QAAQ,CAAC,CACrCC,OAAO,CAAE,IACb,CAAC,CAAC,oDAFKC,KAAK,qBAAEC,QAAQ,qBAItB,QAASC,WAAU,EAAG,CAClB,GAAMC,MAAK,CAAGC,YAAY,CAACC,OAAO,CAACC,OAAO,CAACC,GAAG,CAACC,eAAe,CAAG,QAAQ,CAAC,CAC1EnB,KAAK,CAACoB,GAAG,WAAIH,OAAO,CAACC,GAAG,CAACG,kBAAkB,iCAAgC,CACvEC,OAAO,CAAE,CACLC,aAAa,CAAE,QAAQ,CAAGT,KAC9B,CACJ,CAAC,CAAC,CAACU,IAAI,CAAC,SAACC,GAAG,CAAK,CACb,GAAI,CAACA,GAAG,CAACC,IAAI,CAACC,OAAO,CAAE,CACnBf,QAAQ,gCAAMD,KAAK,MAAED,OAAO,CAAE,KAAK,CAAEkB,OAAO,CAAE,KAAK,GAAG,CAC1D,CAAC,IAAM,CACHhB,QAAQ,gCAAMD,KAAK,MAAED,OAAO,CAAE,KAAK,CAAEkB,OAAO,CAAE,IAAI,GAAG,CACzD,CACJ,CAAC,CAAC,CACN,CAEA3B,KAAK,CAAC4B,SAAS,CAAC,UAAM,CAClBhB,UAAU,EAAE,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,MACIF,MAAK,CAACD,OAAO,cACT,KAAC,cAAc,IAAG,cAElB,KAAC,KAAK,gCAAKF,IAAI,MAAE,MAAM,CAAE,gBAAAsB,KAAK,QAC1BnB,MAAK,CAACiB,OAAO,cACT,KAAC,SAAS,kBAAKE,KAAK,EAAI,cACtB,KAAC,QAAQ,EAAC,EAAE,CAAC,cAAc,EAAG,EACtC,GACL,CAET,CAAC,CAED,cAAezB,aAAY"},"metadata":{},"sourceType":"module"}