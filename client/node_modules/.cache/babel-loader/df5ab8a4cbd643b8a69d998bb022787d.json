{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Refresh}from'@mui/icons-material';import{LoadingButton}from'@mui/lab';import{Box,Divider,LinearProgress,Stack,TextField,Typography}from'@mui/material';import axios from'axios';import React from'react';import GetWebSet from'../../../utils/GetWebSet';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SMTPConfig=function SMTPConfig(){var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var token=localStorage.getItem(process.env.REACT_APP_TOKEN+\"_admin\");var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),smtp=_React$useState4[0],setSmtp=_React$useState4[1];var _GetWebSet=GetWebSet(),web_set=_GetWebSet.web_set;React.useEffect(function(){setSmtp(web_set);},[web_set]);function updateSet(){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/web/update_smtp\"),{smtp_host:smtp.smtp_host,smtp_port:smtp.smtp_port,smtp_email:smtp.smtp_email,smtp_password:smtp.smtp_password},{headers:{Authorization:\"Bearer \"+token}}).then(function(res){alert(res.data.msg);setState(_objectSpread(_objectSpread({},state),{},{loading:false}));if(!res.data.success){console.log(res.data);}}).catch(function(err){return console.log(err);});}function testSet(){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/user/check_smtp\"),{headers:{Authorization:\"Bearer \"+token}}).then(function(res){alert(res.data.msg);setState(_objectSpread(_objectSpread({},state),{},{loading:false}));console.log(res.data);}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsxs(Box,{p:2,children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Stack,{justifyContent:'space-between',alignItems:\"center\",direction:'row',spacing:2,children:/*#__PURE__*/_jsx(Typography,{fontWeight:'bold',children:\"SMTP Settings\"})})}),/*#__PURE__*/_jsx(Box,{mt:2,mb:2,children:/*#__PURE__*/_jsx(Divider,{})}),/*#__PURE__*/_jsx(Stack,{direction:\"column\",spacing:2,children:smtp?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Box,{bgcolor:\"orange\",p:2,borderRadius:2,children:/*#__PURE__*/_jsx(Typography,{color:\"black\",children:\"Without this setting your forget password option won't work.\"})}),/*#__PURE__*/_jsx(TextField,{value:smtp.smtp_host,onChange:function onChange(e){return setSmtp(_objectSpread(_objectSpread({},smtp),{},{smtp_host:e.target.value}));},label:\"SMTP Host\",size:\"small\",fullWidth:true}),/*#__PURE__*/_jsx(TextField,{value:smtp.smtp_port,onChange:function onChange(e){return setSmtp(_objectSpread(_objectSpread({},smtp),{},{smtp_port:e.target.value}));},label:\"SMTP Port\",size:\"small\",fullWidth:true}),/*#__PURE__*/_jsx(TextField,{value:smtp.smtp_email,onChange:function onChange(e){return setSmtp(_objectSpread(_objectSpread({},smtp),{},{smtp_email:e.target.value}));},label:\"Email\",size:\"small\",fullWidth:true}),/*#__PURE__*/_jsx(TextField,{value:smtp.smtp_password,onChange:function onChange(e){return setSmtp(_objectSpread(_objectSpread({},smtp),{},{smtp_password:e.target.value}));},label:\"SMTP Password\",size:\"small\",fullWidth:true}),/*#__PURE__*/_jsx(LoadingButton,{disabled:smtp.smtp_host&&smtp.smtp_port&&smtp.smtp_email&&smtp.smtp_password?false:true,loading:state.loading,onClick:updateSet,variant:\"contained\",fullWidth:true,children:\"Save\"})]}):/*#__PURE__*/_jsx(LinearProgress,{})})]});};export default SMTPConfig;","map":{"version":3,"names":["Refresh","LoadingButton","Box","Divider","LinearProgress","Stack","TextField","Typography","axios","React","GetWebSet","SMTPConfig","useState","state","setState","token","localStorage","getItem","process","env","REACT_APP_TOKEN","smtp","setSmtp","web_set","useEffect","updateSet","loading","post","REACT_APP_BASE_URL","smtp_host","smtp_port","smtp_email","smtp_password","headers","Authorization","then","res","alert","data","msg","success","console","log","catch","err","testSet","get","e","target","value"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/admin/pages/smtp-config/SMTPConfig.js"],"sourcesContent":["import { Refresh } from '@mui/icons-material'\r\nimport { LoadingButton } from '@mui/lab'\r\nimport { Box, Divider, LinearProgress, Stack, TextField, Typography } from '@mui/material'\r\nimport axios from 'axios'\r\nimport React from 'react'\r\nimport GetWebSet from '../../../utils/GetWebSet'\r\n\r\n\r\nconst SMTPConfig = () => {\r\n    const [state, setState] = React.useState({})\r\n    const token = localStorage.getItem(process.env.REACT_APP_TOKEN + \"_admin\")\r\n    const [smtp, setSmtp] = React.useState(\"\")\r\n    const { web_set } = GetWebSet()\r\n\r\n    React.useEffect(() => {\r\n        setSmtp(web_set)\r\n    }, [web_set])\r\n\r\n    function updateSet() {\r\n        setState({ ...state, loading: true })\r\n        axios.post(`${process.env.REACT_APP_BASE_URL}/api/web/update_smtp`, {\r\n            smtp_host: smtp.smtp_host,\r\n            smtp_port: smtp.smtp_port,\r\n            smtp_email: smtp.smtp_email,\r\n            smtp_password: smtp.smtp_password\r\n        }, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        }).then((res) => {\r\n            alert(res.data.msg)\r\n            setState({ ...state, loading: false })\r\n            if (!res.data.success) {\r\n                console.log(res.data)\r\n            }\r\n        }).catch((err) => console.log(err))\r\n    }\r\n\r\n    function testSet() {\r\n        setState({ ...state, loading: true })\r\n        axios.get(`${process.env.REACT_APP_BASE_URL}/api/user/check_smtp`, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        }).then((res) => {\r\n            alert(res.data.msg)\r\n            setState({ ...state, loading: false })\r\n            console.log(res.data)\r\n        }).catch((err) => console.log(err))\r\n    }\r\n\r\n    return (\r\n        <Box p={2}>\r\n            <Box>\r\n                <Stack justifyContent={'space-between'} alignItems='center' direction={'row'} spacing={2}>\r\n                    <Typography fontWeight={'bold'} >SMTP Settings</Typography>\r\n                </Stack>\r\n            </Box>\r\n            <Box mt={2} mb={2}>\r\n                <Divider />\r\n            </Box>\r\n\r\n            <Stack direction='column' spacing={2}>\r\n                {\r\n                    smtp ? (\r\n                        <>\r\n                            <Box bgcolor='orange' p={2} borderRadius={2}>\r\n                                <Typography color='black' >Without this setting your forget password option won't work.</Typography>\r\n                            </Box>\r\n                            <TextField value={smtp.smtp_host} onChange={(e) => setSmtp({ ...smtp, smtp_host: e.target.value })} label=\"SMTP Host\" size='small' fullWidth />\r\n                            <TextField value={smtp.smtp_port} onChange={(e) => setSmtp({ ...smtp, smtp_port: e.target.value })} label=\"SMTP Port\" size='small' fullWidth />\r\n                            <TextField value={smtp.smtp_email} onChange={(e) => setSmtp({ ...smtp, smtp_email: e.target.value })} label=\"Email\" size='small' fullWidth />\r\n                            <TextField value={smtp.smtp_password} onChange={(e) => setSmtp({ ...smtp, smtp_password: e.target.value })} label=\"SMTP Password\" size='small' fullWidth />\r\n                            <LoadingButton disabled={smtp.smtp_host && smtp.smtp_port && smtp.smtp_email && smtp.smtp_password ? false : true} loading={state.loading} onClick={updateSet} variant='contained' fullWidth >Save</LoadingButton>\r\n                            {/* <LoadingButton onClick={testSet} loading={state.loading} endIcon={<Refresh />} sx={{ textTransform: 'none' }} variant='outlined' fullWidth >Test Config</LoadingButton> */}\r\n                        </>\r\n                    ) : <LinearProgress />\r\n                }\r\n            </Stack>\r\n\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default SMTPConfig"],"mappings":"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"},"metadata":{},"sourceType":"module"}