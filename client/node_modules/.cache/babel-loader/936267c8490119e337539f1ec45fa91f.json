{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Box,LinearProgress,Stack,TextField,Container,IconButton,Divider,CircularProgress,Accordion,AccordionSummary,AccordionDetails,Typography}from'@mui/material';import{DoneAll,Send,Done,ExpandMore}from'@mui/icons-material';import axios from'axios';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PingToAdmin=function PingToAdmin(){var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var token=localStorage.getItem(process.env.REACT_APP_TOKEN+\"_user\");function sendMsg(){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/ping/add\"),{message:state.message},{headers:{Authorization:\"Bearer \"+token}}).then(function(res){setState(_objectSpread(_objectSpread({},state),{},{loading:false}));alert(res.data.msg);getMsg();}).catch(function(err){return console.log(err);});}function getMsg(){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/ping/my_message\"),{headers:{Authorization:\"Bearer \"+token}}).then(function(res){if(!res.data.success){alert(res.data.msg);}setState(_objectSpread(_objectSpread({},state),{},{all_messages:res.data.data,loading:false,message:\"\"}));}).catch(function(err){return console.log(err);});}React.useEffect(function(){if(!token){return;}getMsg();},[token]);return/*#__PURE__*/_jsxs(Box,{p:2,children:[/*#__PURE__*/_jsx(Stack,{direction:'row',alignItems:\"center\",children:/*#__PURE__*/_jsx(Typography,{fontWeight:\"bold\",children:\"Ping to Admin\"})}),/*#__PURE__*/_jsx(Box,{mt:2,mb:2,children:/*#__PURE__*/_jsx(Divider,{})}),/*#__PURE__*/_jsxs(Box,{mt:4,children:[/*#__PURE__*/_jsxs(Stack,{alignItems:'flex-start',direction:'column',spacing:2,children:[/*#__PURE__*/_jsx(TextField,{value:state.message,onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{message:e.target.value}));},label:\"Type your message here\",size:\"small\",fullWidth:true,rows:4,multiline:true}),state.loading?/*#__PURE__*/_jsx(CircularProgress,{}):/*#__PURE__*/_jsx(IconButton,{onClick:sendMsg,disabled:state.message?false:true,children:/*#__PURE__*/_jsx(Send,{})})]}),/*#__PURE__*/_jsx(Box,{mt:2,mb:2,children:/*#__PURE__*/_jsx(Divider,{})}),/*#__PURE__*/_jsx(Stack,{direction:'column',spacing:2,children:state.all_messages?_toConsumableArray(state.all_messages).reverse().map(function(item,key){return/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{sx:{bgcolor:item.admin_response?\"green\":null,borderRadius:2},expandIcon:/*#__PURE__*/_jsx(ExpandMore,{}),\"aria-controls\":\"panel1a-content\",id:\"panel1a-header\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",children:[key+1,\") \",item.message,\" \",item.admin_response?/*#__PURE__*/_jsx(DoneAll,{sx:{color:'lightgreen',height:15,width:15}}):/*#__PURE__*/_jsx(Done,{sx:{color:'lightgreen',height:15,width:15}})]})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(Typography,{sx:{mb:2},fontSize:12,color:\"gray\",children:item.admin_response?item.admin_response:\"Awaiting to respond\"}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Typography,{sx:{mt:2},align:\"right\",fontSize:12,color:\"gray\",children:[\"Sent on: \",moment(item.createdAt).format('DD-MMMM-YYYY')]})]})})]},key);}):/*#__PURE__*/_jsx(LinearProgress,{})})]})]});};export default PingToAdmin;","map":{"version":3,"names":["React","Box","LinearProgress","Stack","TextField","Container","IconButton","Divider","CircularProgress","Accordion","AccordionSummary","AccordionDetails","Typography","DoneAll","Send","Done","ExpandMore","axios","moment","PingToAdmin","useState","state","setState","token","localStorage","getItem","process","env","REACT_APP_TOKEN","sendMsg","loading","post","REACT_APP_BASE_URL","message","headers","Authorization","then","res","alert","data","msg","getMsg","catch","err","console","log","get","success","all_messages","useEffect","e","target","value","reverse","map","item","key","bgcolor","admin_response","borderRadius","color","height","width","mb","mt","createdAt","format"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/user/pages/ping/PingToAdmin.js"],"sourcesContent":["import React from 'react'\r\nimport { Box, LinearProgress, Stack, TextField, Container, IconButton, Divider, CircularProgress, Accordion, AccordionSummary, AccordionDetails, Typography } from '@mui/material'\r\nimport { DoneAll, Send, Done, ExpandMore } from '@mui/icons-material'\r\nimport axios from 'axios'\r\nimport moment from 'moment'\r\n\r\n\r\nconst PingToAdmin = () => {\r\n    const [state, setState] = React.useState({})\r\n    const token = localStorage.getItem(process.env.REACT_APP_TOKEN + \"_user\")\r\n\r\n    function sendMsg() {\r\n        setState({ ...state, loading: true })\r\n        axios.post(`${process.env.REACT_APP_BASE_URL}/api/ping/add`, {\r\n            message: state.message\r\n        }, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        }).then((res) => {\r\n            setState({ ...state, loading: false })\r\n            alert(res.data.msg)\r\n            getMsg()\r\n        }).catch((err) => console.log(err))\r\n    }\r\n\r\n    function getMsg() {\r\n        setState({ ...state, loading: true })\r\n        axios.get(`${process.env.REACT_APP_BASE_URL}/api/ping/my_message`, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        }).then((res) => {\r\n            if (!res.data.success) {\r\n                alert(res.data.msg)\r\n            }\r\n            setState({ ...state, all_messages: res.data.data, loading: false, message: \"\" })\r\n        })\r\n            .catch((err) => console.log(err))\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (!token) {\r\n            return\r\n        }\r\n        getMsg()\r\n    }, [token])\r\n\r\n    return (\r\n        <Box p={2}>\r\n            <Stack direction={'row'} alignItems='center'>\r\n                <Typography fontWeight=\"bold\" >Ping to Admin</Typography>\r\n            </Stack>\r\n            <Box mt={2} mb={2}>\r\n                <Divider />\r\n            </Box>\r\n            <Box mt={4} >\r\n                <Stack alignItems={'flex-start'} direction={'column'} spacing={2}>\r\n                    <TextField value={state.message} onChange={(e) => setState({ ...state, message: e.target.value })} label=\"Type your message here\" size='small' fullWidth rows={4} multiline />\r\n                    {\r\n                        state.loading ? (\r\n                            <CircularProgress />\r\n                        ) : (\r\n                            <IconButton onClick={sendMsg} disabled={state.message ? false : true} >\r\n                                <Send />\r\n                            </IconButton>\r\n                        )\r\n                    }\r\n                </Stack>\r\n\r\n                <Box mt={2} mb={2}>\r\n                    <Divider />\r\n                </Box>\r\n\r\n                <Stack direction={'column'} spacing={2}>\r\n                    {\r\n                        state.all_messages ? [...state.all_messages].reverse().map((item, key) => {\r\n                            return (\r\n                                <Accordion key={key} >\r\n                                    <AccordionSummary\r\n                                        sx={{ bgcolor: item.admin_response ? \"green\" : null, borderRadius: 2 }}\r\n                                        expandIcon={<ExpandMore />}\r\n                                        aria-controls=\"panel1a-content\"\r\n                                        id=\"panel1a-header\"\r\n                                    >\r\n                                        <Typography variant='caption' >{key + 1}) {item.message} {item.admin_response ? <DoneAll sx={{ color: 'lightgreen', height: 15, width: 15 }} /> : <Done sx={{ color: 'lightgreen', height: 15, width: 15 }} />}</Typography>\r\n                                    </AccordionSummary>\r\n                                    <AccordionDetails>\r\n                                        <Typography>\r\n                                            <Typography sx={{ mb: 2 }} fontSize={12} color='gray' >{\r\n                                                item.admin_response ? (\r\n                                                    item.admin_response\r\n                                                ) : \"Awaiting to respond\"\r\n                                            }</Typography>\r\n                                            <Divider />\r\n                                            <Typography sx={{ mt: 2 }} align='right' fontSize={12} color='gray' >Sent on: {moment(item.createdAt).format('DD-MMMM-YYYY')}</Typography>\r\n                                        </Typography>\r\n                                    </AccordionDetails>\r\n                                </Accordion>\r\n                            )\r\n                        }) : <LinearProgress />\r\n                    }\r\n                </Stack>\r\n            </Box>\r\n\r\n        </Box >\r\n    )\r\n}\r\n\r\nexport default PingToAdmin"],"mappings":"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"},"metadata":{},"sourceType":"module"}