{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box,Grid,Typography,LinearProgress,IconButton}from'@mui/material';import React from'react';import{DataGrid,GridToolbarContainer,GridToolbarExport}from'@mui/x-data-grid';import{Delete}from'@mui/icons-material';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CustomToolbar(){return/*#__PURE__*/_jsx(GridToolbarContainer,{children:/*#__PURE__*/_jsx(Box,{p:2,width:'100%',children:/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:'space-between',spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"All Users\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(GridToolbarExport,{})})]})})});}var CheckLogs=function CheckLogs(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),report=_React$useState2[0],setLogs=_React$useState2[1];var token=localStorage.getItem(process.env.REACT_APP_TOKEN+\"_user\");function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/instance/get_logs\"),{headers:{Authorization:\"Bearer \"+token}});case 2:res=_context.sent;setLogs(res.data.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}React.useEffect(function(){if(!token)return;fetchData();},[token]);function delLog(e){if(window.confirm('Are your sure ?')){axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/instance/del_log\"),{id:e},{headers:{Authorization:\"Bearer \"+token}}).then(function(res){alert(res.data.msg);fetchData();}).catch(function(er){return console.log(er);});}}return/*#__PURE__*/_jsxs(Box,{p:2,children:[/*#__PURE__*/_jsx(Typography,{fontWeight:'bold',variant:\"h6\",children:\"Report Single Message\"}),/*#__PURE__*/_jsx(Box,{mt:4,children:report?/*#__PURE__*/_jsx(Box,{height:\"80vh\",children:/*#__PURE__*/_jsx(DataGrid,{getRowId:function getRowId(row){return row.id;},rows:_toConsumableArray(report).reverse(),columns:[{headerName:\"ID\",field:'id',flex:1},{headerName:\"Device\",field:'sender',flex:1},{headerName:\"Receiver\",field:'receiver',flex:1},{headerName:\"Status\",field:'status',flex:1},{headerName:\"Delete\",field:'del',flex:1,renderCell:function renderCell(data){return/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return delLog(data.row.id);},color:\"error\",children:/*#__PURE__*/_jsx(Delete,{})});}}],pageSize:50,rowsPerPageOptions:[50],checkboxSelection:false,components:{Toolbar:CustomToolbar}})}):/*#__PURE__*/_jsx(LinearProgress,{})})]});};export default CheckLogs;","map":{"version":3,"names":["Box","Grid","Typography","LinearProgress","IconButton","React","DataGrid","GridToolbarContainer","GridToolbarExport","Delete","axios","CustomToolbar","CheckLogs","useState","report","setLogs","token","localStorage","getItem","process","env","REACT_APP_TOKEN","fetchData","get","REACT_APP_BASE_URL","headers","Authorization","res","data","useEffect","delLog","e","window","confirm","post","id","then","alert","msg","catch","er","console","log","row","reverse","headerName","field","flex","renderCell","Toolbar"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/user/pages/check-logs/CheckLogs.js"],"sourcesContent":["import { Box, Grid, Typography, LinearProgress, IconButton } from '@mui/material'\r\nimport React from 'react'\r\nimport { DataGrid, GridToolbarContainer, GridToolbarExport } from '@mui/x-data-grid';\r\nimport { Delete } from '@mui/icons-material';\r\nimport axios from 'axios'\r\n\r\nfunction CustomToolbar() {\r\n    return (\r\n        <GridToolbarContainer>\r\n            <Box p={2} width={'100%'}  >\r\n                <Grid container justifyContent={'space-between'} spacing={2}>\r\n                    <Grid item>\r\n                        <Typography variant='h5' >All Users</Typography>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <GridToolbarExport />\r\n                    </Grid>\r\n                </Grid>\r\n            </Box>\r\n        </GridToolbarContainer>\r\n    );\r\n}\r\n\r\nconst CheckLogs = () => {\r\n    const [report, setLogs] = React.useState(\"\")\r\n    const token = localStorage.getItem(process.env.REACT_APP_TOKEN + \"_user\")\r\n\r\n    async function fetchData() {\r\n        const res = await axios.get(`${process.env.REACT_APP_BASE_URL}/api/instance/get_logs`, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        })\r\n        setLogs(res.data.data)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (!token) return\r\n        fetchData()\r\n    }, [token])\r\n\r\n    function delLog(e) {\r\n        if (window.confirm('Are your sure ?')) {\r\n            axios.post(`${process.env.REACT_APP_BASE_URL}/api/instance/del_log`, {\r\n                id: e\r\n            }, {\r\n                headers: {\r\n                    Authorization: \"Bearer \" + token\r\n                }\r\n            }).then((res) => {\r\n                alert(res.data.msg)\r\n                fetchData()\r\n            }).catch((er) => console.log(er))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Box p={2}>\r\n            <Typography fontWeight={'bold'} variant='h6' >Report Single Message</Typography>\r\n            <Box mt={4}>\r\n                {\r\n                    report ? (\r\n                        <Box height='80vh'>\r\n                            <DataGrid\r\n                                getRowId={(row) => row.id}\r\n                                rows={[...report].reverse()}\r\n                                columns={[\r\n                                    { headerName: \"ID\", field: 'id', flex: 1, },\r\n                                    { headerName: \"Device\", field: 'sender', flex: 1, },\r\n                                    { headerName: \"Receiver\", field: 'receiver', flex: 1, },\r\n                                    { headerName: \"Status\", field: 'status', flex: 1, },\r\n                                    {\r\n                                        headerName: \"Delete\", field: 'del', flex: 1, renderCell: data => {\r\n                                            return (\r\n                                                <IconButton onClick={() => delLog(data.row.id)} color='error' >\r\n                                                    <Delete />\r\n                                                </IconButton>\r\n                                            )\r\n                                        }\r\n                                    }\r\n                                ]}\r\n                                pageSize={50}\r\n                                rowsPerPageOptions={[50]}\r\n                                checkboxSelection={false}\r\n                                components={{\r\n                                    Toolbar: CustomToolbar,\r\n                                }}\r\n                            />\r\n                        </Box>\r\n                    ) : <LinearProgress />\r\n                }\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default CheckLogs"],"mappings":"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"},"metadata":{},"sourceType":"module"}