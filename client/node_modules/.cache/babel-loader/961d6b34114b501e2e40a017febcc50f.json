{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/Whatshub_v1.2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import GetAllUserAdmin from'../../../utils/GetAllUserAdmin';import{AdminContext}from'../../../context/AdminContext';import{DataGrid,GridToolbarContainer,GridToolbarExport}from'@mui/x-data-grid';import{Box,CircularProgress,Dialog,Grid,IconButton,LinearProgress,Typography}from'@mui/material';import{Close,Edit,Login}from'@mui/icons-material';import DialogHeader from'../../../common/DialogHeader';import EditUser from'./components/EditUser';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CustomToolbar(){return/*#__PURE__*/_jsx(GridToolbarContainer,{children:/*#__PURE__*/_jsx(Box,{p:2,width:'100%',children:/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:'space-between',spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"All Users\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(GridToolbarExport,{})})]})})});}var ManageUsers=function ManageUsers(){var _React$useState=React.useState({dialog:false}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var token=localStorage.getItem(process.env.REACT_APP_TOKEN+\"_admin\");var adminContext=React.useContext(AdminContext);var _GetAllUserAdmin=GetAllUserAdmin(),all_users=_GetAllUserAdmin.all_users;React.useEffect(function(){if(!all_users){return;}adminContext.setData(_objectSpread(_objectSpread({},adminContext.data),{},{all_users:all_users}));},[all_users]);function direcLogin(e){setState(_objectSpread(_objectSpread({},state),{},{loading:true}));axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/api/user/direct_login\"),{uid:e},{headers:{Authorization:\"Bearer \"+token}}).then(function(res){setState(_objectSpread(_objectSpread({},state),{},{loading:false}));localStorage.setItem(process.env.REACT_APP_TOKEN+\"_user\",res.data.token);window.open('/user');}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Dialog,{fullScreen:true,open:state.dialog,onClose:function onClose(){return setState(_objectSpread(_objectSpread({},state),{},{dialog:false}));},children:[/*#__PURE__*/_jsx(DialogHeader,{title:\"Edit User\",closebtn:/*#__PURE__*/_jsx(IconButton,{edge:\"start\",color:\"inherit\",onClick:function onClick(){setState(_objectSpread(_objectSpread({},state),{},{dialog:false}));},\"aria-label\":\"close\",children:/*#__PURE__*/_jsx(Close,{})})}),/*#__PURE__*/_jsx(EditUser,{user:state.user})]}),adminContext.data.all_users?/*#__PURE__*/_jsx(Box,{height:\"80vh\",children:/*#__PURE__*/_jsx(DataGrid,{getRowId:function getRowId(row){return row.id;},rows:_toConsumableArray(adminContext.data.all_users).reverse(),columns:[{headerName:\"Login\",field:'uid',flex:1,renderCell:function renderCell(data){return state.loading?/*#__PURE__*/_jsx(CircularProgress,{size:25}):/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return direcLogin(data.row.uid);},children:/*#__PURE__*/_jsx(Login,{})});}},{headerName:\"Name\",field:'name',flex:1},{headerName:\"Email\",field:'email',flex:1},{headerName:\"Mobile\",field:'mobile',flex:1},{headerName:\"Update\",field:'id',flex:1,renderCell:function renderCell(data){return/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){setState(_objectSpread(_objectSpread({},state),{},{dialog:true,user:data.row}));},children:/*#__PURE__*/_jsx(Edit,{})});}}],pageSize:50,rowsPerPageOptions:[50],checkboxSelection:false,components:{Toolbar:CustomToolbar}})}):/*#__PURE__*/_jsx(LinearProgress,{})]});};export default ManageUsers;","map":{"version":3,"names":["React","GetAllUserAdmin","AdminContext","DataGrid","GridToolbarContainer","GridToolbarExport","Box","CircularProgress","Dialog","Grid","IconButton","LinearProgress","Typography","Close","Edit","Login","DialogHeader","EditUser","axios","CustomToolbar","ManageUsers","useState","dialog","state","setState","token","localStorage","getItem","process","env","REACT_APP_TOKEN","adminContext","useContext","all_users","useEffect","setData","data","direcLogin","e","loading","post","REACT_APP_BASE_URL","uid","headers","Authorization","then","res","setItem","window","open","catch","err","console","log","user","row","id","reverse","headerName","field","flex","renderCell","Toolbar"],"sources":["C:/Users/Administrator/Desktop/Whatshub_v1.2/client/src/admin/pages/manage-users/ManageUsers.js"],"sourcesContent":["import React from 'react'\r\nimport GetAllUserAdmin from '../../../utils/GetAllUserAdmin'\r\nimport { AdminContext } from '../../../context/AdminContext'\r\nimport { DataGrid, GridToolbarContainer, GridToolbarExport } from '@mui/x-data-grid';\r\nimport { Box, CircularProgress, Dialog, Grid, IconButton, LinearProgress, Typography } from '@mui/material'\r\nimport { Close, Edit, Login } from '@mui/icons-material';\r\nimport DialogHeader from '../../../common/DialogHeader';\r\nimport EditUser from './components/EditUser'\r\nimport axios from 'axios'\r\n\r\nfunction CustomToolbar() {\r\n    return (\r\n        <GridToolbarContainer>\r\n            <Box p={2} width={'100%'}  >\r\n                <Grid container justifyContent={'space-between'} spacing={2}>\r\n                    <Grid item>\r\n                        <Typography variant='h5' >All Users</Typography>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <GridToolbarExport />\r\n                    </Grid>\r\n                </Grid>\r\n            </Box>\r\n        </GridToolbarContainer>\r\n    );\r\n}\r\n\r\nconst ManageUsers = () => {\r\n    const [state, setState] = React.useState({\r\n        dialog: false\r\n    })\r\n    const token = localStorage.getItem(process.env.REACT_APP_TOKEN + \"_admin\")\r\n\r\n    const adminContext = React.useContext(AdminContext)\r\n    const { all_users } = GetAllUserAdmin()\r\n    React.useEffect(() => {\r\n        if (!all_users) {\r\n            return\r\n        }\r\n        adminContext.setData({ ...adminContext.data, all_users: all_users })\r\n    }, [all_users])\r\n\r\n\r\n    function direcLogin(e) {\r\n        setState({ ...state, loading: true })\r\n        axios.post(`${process.env.REACT_APP_BASE_URL}/api/user/direct_login`, {\r\n            uid: e\r\n        }, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + token\r\n            }\r\n        }).then((res) => {\r\n            setState({ ...state, loading: false })\r\n            localStorage.setItem(process.env.REACT_APP_TOKEN + \"_user\", res.data.token)\r\n            window.open('/user')\r\n        }).catch((err) => console.log(err))\r\n    }\r\n\r\n\r\n    return (\r\n        <div >\r\n            <Dialog fullScreen open={state.dialog} onClose={() => setState({ ...state, dialog: false })} >\r\n                <DialogHeader title=\"Edit User\"\r\n                    closebtn={<IconButton\r\n                        edge=\"start\"\r\n                        color=\"inherit\"\r\n                        onClick={() => {\r\n                            setState({ ...state, dialog: false })\r\n                        }}\r\n                        aria-label=\"close\"\r\n                    >\r\n                        <Close />\r\n                    </IconButton>} />\r\n                <EditUser user={state.user} />\r\n            </Dialog>\r\n            {\r\n                adminContext.data.all_users ? (\r\n                    <Box height='80vh'>\r\n                        <DataGrid\r\n                            getRowId={(row) => row.id}\r\n                            rows={[...adminContext.data.all_users].reverse()}\r\n                            columns={[\r\n                                {\r\n                                    headerName: \"Login\", field: 'uid', flex: 1, renderCell: data =>\r\n                                        state.loading ? (\r\n                                            <CircularProgress size={25} />\r\n                                        ) : (\r\n                                            <IconButton\r\n                                                onClick={() => direcLogin(data.row.uid)}\r\n                                            >\r\n                                                <Login />\r\n                                            </IconButton>\r\n                                        )\r\n                                },\r\n                                { headerName: \"Name\", field: 'name', flex: 1, },\r\n                                { headerName: \"Email\", field: 'email', flex: 1, },\r\n                                { headerName: \"Mobile\", field: 'mobile', flex: 1, },\r\n                                {\r\n                                    headerName: \"Update\", field: 'id', flex: 1, renderCell: data => <IconButton onClick={() => {\r\n                                        setState({ ...state, dialog: true, user: data.row })\r\n                                    }} >\r\n                                        <Edit />\r\n                                    </IconButton>\r\n                                },\r\n                            ]}\r\n                            pageSize={50}\r\n                            rowsPerPageOptions={[50]}\r\n                            checkboxSelection={false}\r\n                            components={{\r\n                                Toolbar: CustomToolbar,\r\n                            }}\r\n                        />\r\n                    </Box>\r\n                ) : <LinearProgress />\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ManageUsers"],"mappings":"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"},"metadata":{},"sourceType":"module"}